{"remainingRequest":"/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/blog/blog/src/components/function/storeArticle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/local/var/www/blog/blog/src/components/function/storeArticle.vue","mtime":1554105273059},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport editor from './editor.vue'\nexport default {\n  data () {\n    return {\n      title: '',\n      showStoreArticle: false,//创建提交文件是否弹出\n      options: null,\n      defaultTopic: [],\n      refresh: true,\n    }\n  },\n  mounted () {\n    this.$server.allTopic().then(data => {\n      this.options = data.data;\n\n    }).catch(err => {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    })\n  },\n  components: {\n    editor,\n  },\n  methods: {\n    storeArticle () {\n\n      let content = this.$refs.content.editorContent;//获取自组件中的值，文章内容\n\n      let contentNum = content.replace(/<[^>]+>/g, \"\").length;//正则去空格判断是否全是空格\n\n      if (contentNum < 1 || contentNum == 0) {\n        this.$message.error('内容不能为空');\n        return false;\n      }\n\n      let titleNum = this.title.replace(/\\s+/g, \"\").length;//正则去空格判断是否全是空格\n      if (titleNum < 1 || titleNum == 0) {\n        this.$message.error('标题不能为空');\n        return false;\n      }\n      //文章数据\n      let paramObj = {\n        topic_id: this.defaultTopic[0],\n        body: content,\n        title: this.title,\n      }\n      //发送数据到后台创建文章\n      this.$server.storeArticle(paramObj).then(res => {\n        this.$refs.content.editorContent = '';\n        this.defaultTopic = [];\n        this.title = '';\n        this.showStoreArticle = false;\n        this.$refs.content.clear();\n        // eslint-disable-next-line no-console\n        this.$message({\n          message: '发布文章成功',\n          type: 'success'\n        });\n\n      }).catch(err => {\n        // eslint-disable-next-line no-console\n        console.log(err);\n      })\n\n\n    }\n  }\n\n}\n",{"version":3,"sources":["storeArticle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA","file":"storeArticle.vue","sourceRoot":"src/components/function","sourcesContent":["<style lang=\"scss\" scoped>\n</style>\n\n<template>\n  <div>\n    <i class=\"el-icon-edit\"\n       @click=\"showStoreArticle = true\">发表文章</i>\n\n    <el-dialog width=\"1000px\"\n               title=\"发表文章\"\n               :visible.sync=\"showStoreArticle\"\n               append-to-body>\n      <el-select v-model=\"defaultTopic\"\n                 style=\"width:100%;margin-bottom:20px;\"\n                 multiple\n                 :multiple-limit='1'\n                 placeholder=\"请选择你发布的文章相关标签,最多选择1个\">\n        <el-option v-for=\"item in options\"\n                   :key=\"item.id\"\n                   :label=\"item.name\"\n                   :value=\"item.id\">\n        </el-option>\n      </el-select>\n      <el-input placeholder=\"请输入内容\"\n                v-model=\"title\"\n                id=\"title\"\n                style=\"margin-bottom:20px;\">\n        <template slot=\"prepend\">文章标题</template>\n      </el-input>\n      <editor ref=\"content\"></editor>\n      <el-button type=\"success\"\n                 style=\"margin-top:20px;\"\n                 @click=\"storeArticle()\">发布文章</el-button>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport editor from './editor.vue'\nexport default {\n  data () {\n    return {\n      title: '',\n      showStoreArticle: false,//创建提交文件是否弹出\n      options: null,\n      defaultTopic: [],\n      refresh: true,\n    }\n  },\n  mounted () {\n    this.$server.allTopic().then(data => {\n      this.options = data.data;\n\n    }).catch(err => {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    })\n  },\n  components: {\n    editor,\n  },\n  methods: {\n    storeArticle () {\n\n      let content = this.$refs.content.editorContent;//获取自组件中的值，文章内容\n\n      let contentNum = content.replace(/<[^>]+>/g, \"\").length;//正则去空格判断是否全是空格\n\n      if (contentNum < 1 || contentNum == 0) {\n        this.$message.error('内容不能为空');\n        return false;\n      }\n\n      let titleNum = this.title.replace(/\\s+/g, \"\").length;//正则去空格判断是否全是空格\n      if (titleNum < 1 || titleNum == 0) {\n        this.$message.error('标题不能为空');\n        return false;\n      }\n      //文章数据\n      let paramObj = {\n        topic_id: this.defaultTopic[0],\n        body: content,\n        title: this.title,\n      }\n      //发送数据到后台创建文章\n      this.$server.storeArticle(paramObj).then(res => {\n        this.$refs.content.editorContent = '';\n        this.defaultTopic = [];\n        this.title = '';\n        this.showStoreArticle = false;\n        this.$refs.content.clear();\n        // eslint-disable-next-line no-console\n        this.$message({\n          message: '发布文章成功',\n          type: 'success'\n        });\n\n      }).catch(err => {\n        // eslint-disable-next-line no-console\n        console.log(err);\n      })\n\n\n    }\n  }\n\n}\n</script>\n\n\n"]}]}