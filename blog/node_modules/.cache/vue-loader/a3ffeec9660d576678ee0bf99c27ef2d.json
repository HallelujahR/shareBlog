{"remainingRequest":"/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/blog/blog/src/components/User/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/local/var/www/blog/blog/src/components/User/index.vue","mtime":1547790966345},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters, mapMutations } from 'vuex'\nexport default {\n  data () {\n    return {\n      state: false,//Âà§Êñ≠ÊòØ‰∏çÊòØÊú¨‰∫∫\n      user: {},//Áî®Êà∑Âü∫Êú¨‰ø°ÊÅØ\n      detail: {},//Áî®Êà∑ËØ¶ÊÉÖ\n      loading: true,\n      width: '',\n      height: 230,\n      //ÂàùÂßãÂåñËÉåÊôØÂõæÊèí‰ª∂\n      croppa: {},\n      //ÂàùÂßãÂåñÂõæÁâáÊªëÂä®ÊîæÂ§ßÁº©Â∞èinput range\n      sliderVal: 0,\n      sliderMin: 0,\n      sliderMax: 0,\n      root: '',//ÁΩëÁ´ôapiÊ†πÁõÆÂΩï\n      alterImgFlag: true,//ÊòØÂê¶Âá∫Áé∞Â§ÑÁêÜËÉåÊôØÂõæÁâáÊåâÈíÆ\n      freshFlag: false,//Âà§Êñ≠ÊòØÂê¶‰∏ä‰º†ËøáÂõæÁâá\n      alterDetail: true,//Ë∑≥ËΩ¨Âà∞ÁºñËæë‰∏™‰∫∫ËµÑÊñôÂºÄÂÖ≥\n      cursorFlag: false,//ÊéßÂà∂Èº†Ê†áÂú®ËÉåÊôØÂõæ‰∏äÁöÑÊ†∑Âºè\n      centerDialogVisible: false,//‰øÆÊîπÂ§¥ÂÉèÁöÑÂØπËØùÊ°ÜÊéßÂà∂\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'verbState',//ÁôªÂΩïÁä∂ÊÄÅ\n      'token',//ÁôªÂΩïÁöÑÁî®Êà∑ÁöÑtoken\n      'self',//Ëé∑ÂèñÂΩìÂâçÁôªÂΩïÁöÑÁî®Êà∑‰ø°ÊÅØ\n    ]),\n  },\n  //ÁõëÂê¨Ë∑ØÁî±ÂèòÂåñ\n  watch: {\n    $route () {\n      //Ëé∑ÂèñÁΩëÈ°µurlÂà§Êñ≠ÊòØÂê¶Âú®Êõ¥ÊîπËØ¶ÊÉÖÈ°µÈù¢\n      if (this.$route.path.endsWith('alterDetail')) this.alterDetail = false;\n    }\n  },\n  created: function () {\n\n    //Ëé∑ÂèñÊµèËßàÂô®Á™óÂè£ÁöÑÂÆΩÂ∫¶ ÁÑ∂ÂêéËµãÂÄºÁªôËÉåÊôØÂõæÁâáÂÆΩÂ∫¶\n    this.width = window.screen.width;\n    //Âà§Êñ≠ÊòØÂê¶ÁôªÂΩï\n    this.state = localStorage.getItem('verbState');\n    //Ëé∑ÂèñË∑ØÁî±‰º†ÈÄíËøáÊù•ÁöÑÁî®Êà∑id\n    this.id = this.$route.params.id;\n\n    //Êï∞ÊçÆ\n    let paramsObj = {\n      id: this.id,\n    }\n    //ÂèëÈÄÅaxios Ëé∑Âèñ‰º†ÈÄíËøáÊù•idÂØπÁî®ÁöÑÁî®Êà∑ÁöÑÊï∞ÊçÆ\n    this.$server.getInformation(paramsObj).then(data => {\n      //Ëé∑ÂèñÂà∞Áî®Êà∑ÁöÑÂü∫Êú¨‰ø°ÊÅØ\n      this.user = data;\n      //Ëé∑ÂèñÂà∞Áî®Êà∑ÁöÑËØ¶ÁªÜ‰ø°ÊÅØ\n      this.detail = data.user_detail;\n      //Âà§Êñ≠Áî®Êà∑ÊòØÂê¶ÊúâËÉåÊôØÂõæÁâá ‰∏îÊòØÂê¶ÊòØÊú¨‰∫∫È°µÈù¢ ÁÑ∂ÂêéÊõ¥ÊîπÈ´òÂ∫¶\n      //‰πãÊâÄ‰ª•‰ΩøÁî®ÂÆöÊó∂Âô® ÊòØÂõ†‰∏∫ÊàëÂà´Êó†‰ªñÊ≥ï Âè™ËÉΩÁî®ÂÆöÊó∂Âô®Âª∂ËøüÁÑ∂ÂêéËé∑ÂèñÊï∞ÊçÆ\n      setTimeout(() => {\n        if (this.user.backgroundImg != null || this.user.id == this.self.id) {\n          this.state = true;\n          this.height = 430;\n        }\n      }, 200);\n\n    }).catch(err => {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    })\n  },\n  mounted: function () {\n    //ÁΩëÈ°µÂä†ËΩΩÁä∂ÊÄÅ\n    this.loading = false;\n    //apiÂú∞ÂùÄ\n    this.root = this.$URL;\n    //Ëé∑ÂèñÁΩëÈ°µurlÂà§Êñ≠ÊòØÂê¶Âú®Êõ¥ÊîπËØ¶ÊÉÖÈ°µÈù¢\n    if (this.$route.path.endsWith('alterDetail')) this.alterDetail = false;\n  },\n  methods: {\n    ...mapMutations({\n      setuser: 'SET_USER',\n    }),\n    onFileTypeMismatch () {\n      this.$message({\n        message: 'Êñá‰ª∂Ê†ºÂºè‰∏çÂØπÂë¶ üò≥',\n        type: 'warning',\n      })\n    },\n    onNewImage () {\n      this.sliderVal = this.croppa.scaleRatio\n      this.sliderMin = this.croppa.scaleRatio / 2\n      this.sliderMax = this.croppa.scaleRatio * 5\n    },\n\n    onSliderChange (evt) {\n      var increment = evt.target.value\n      this.croppa.scaleRatio = +increment\n    },\n\n    onZoom () {\n      // To prevent zooming out of range when using scrolling to zoom\n      // if (this.sliderMax && this.croppa.scaleRatio >= this.sliderMax) {\n      //   this.croppa.scaleRatio = this.sliderMax\n      // } else if (this.sliderMin && this.croppa.scaleRatio <= this.sliderMin) {\n      //   this.croppa.scaleRatio = this.sliderMin\n      // }\n\n      this.sliderVal = this.croppa.scaleRatio\n    },\n    upload () {\n\n      //Âà§Êñ≠ÊòØÂê¶ÊúâÂõæÁâáÈÄâ‰∏≠\n      if (!this.croppa.hasImage()) {\n        this.$message({\n          message: '‰Ω†ËøòÊ≤°ÊúâÈÄâÊã©ÂõæÁâá üò≥',\n          type: 'warning'\n        });\n\n        return false;\n      }\n\n      //Ëé∑ÂèñÂà∞Êñá‰ª∂ ‰ΩÜÊòØÊòØblob ‰∫åËøõÂà∂ËµÑÊ∫ê\n      this.croppa.generateBlob((blob) => {\n        //‰∫åËøõÂà∂ËΩ¨Êñá‰ª∂\n        const file = new File([blob], 'backImg', {\n          type: 'image/jpeg',\n        });\n        var fd = new FormData()\n        fd.append('image', file);\n        fd.append('type', 'backgroundImg');\n\n        //ÂèëÈÄÅaxiosÊõ¥ÊîπÂõæÁâá\n        this.$server.uploadImg(fd).then(data => {\n          //Êõ¥ÊîπÈªòËÆ§ÂõæÁâáË∑ØÂæÑ\n          this.detail.backgroundImg = data;\n          //Êõ¥ÊîπÊåâÈíÆÁä∂ÊÄÅ\n          this.alterImgFlag = !this.alterImgFlag;\n          //‰∏ä‰º†ÊàêÂäüÊèêÁ§∫\n          this.$message({\n            type: 'success',\n            message: '‰∏ä‰º†ÊàêÂäü üòä'\n          });\n        }).catch(err => {\n          // eslint-disable-next-line no-console\n          console.log('err', err);\n        })\n\n\n        return false;\n      })\n    },\n    alterImg () {\n      this.alterImgFlag = !this.alterImgFlag;\n      this.cursorFlag = !this.cursorFlag;\n      this.croppa.refresh()\n    },\n    removeBackgroundImg () {\n      this.$confirm('ÁßªÈô§ËÉåÊôØ, ÊòØÂê¶ÁªßÁª≠?', 'ÊèêÁ§∫', {\n        confirmButtonText: 'Á°ÆÂÆö',\n        cancelButtonText: 'ÂèñÊ∂à',\n        type: 'warning'\n      }).then(() => {\n\n        //ÂèÇÊï∞\n        let paramsObj = {\n          type: 'backgroundImg',\n        }\n        //ÂèëÈÄÅaxios Âà†Èô§ÂõæÁâá\n        this.$server.deleteImg(paramsObj).then(data => {\n          if (data == 2) {\n            this.$message({\n              type: 'warning',\n              message: 'ËøòÊ≤°ÊúâËÉåÊôØÂõæ üòì'\n            });\n            return false;\n          }\n          //Êõ¥ÊîπÈªòËÆ§ÂõæÁâáË∑ØÂæÑ\n          this.detail.backgroundImg = '';\n          //Ëß¶ÂèëÊèí‰ª∂ÁßªÈô§\n          this.croppa.remove();\n          //ÊàêÂäüÊèêÁ§∫\n          this.$message({\n            type: 'success',\n            message: 'ÁßªÈô§ÊàêÂäü!'\n          });\n          //Êõ¥ÊîπÊåâÈíÆÁä∂ÊÄÅ\n          this.alterImgFlag = !this.alterImgFlag;\n\n        }).catch(err => {\n          // eslint-disable-next-line no-console\n          console.log(err)\n        })\n\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: 'Â∑≤ÂèñÊ∂à'\n        });\n      });\n    },\n    alterDetails () {\n      this.alterDetail = !this.alterDetail;\n    },\n    //Êõ¥ÊîπÂ§¥ÂÉèÁöÑcroppa Êõ¥Êîπ‰∏∫ÂúÜÂúà\n    onInit () {\n      this.croppa.addClipPlugin(function (ctx, x, y, w, h) {\n        /*\n         * ctx: canvas context\n         * x: start point (top-left corner) x coordination\n         * y: start point (top-left corner) y coordination\n         * w: croppa width\n         * h: croppa height\n        */\n\n        ctx.beginPath()\n        ctx.arc(x + w / 2, y + h / 2, w / 2, 0, 2 * Math.PI, true)\n        ctx.closePath()\n      })\n    },\n    //‰∏ä‰º†Â§¥ÂÉèÁöÑÊñπÊ≥ï\n    uploadAvatar () {\n\n      //Âà§Êñ≠ÊòØÂê¶ÊúâÂõæÁâáÈÄâ‰∏≠\n      if (!this.croppa.hasImage()) {\n        this.$message({\n          message: '‰Ω†ËøòÊ≤°ÊúâÈÄâÊã©ÂõæÁâá üò≥',\n          type: 'warning'\n        });\n\n        return false;\n      }\n\n      //Ëé∑ÂèñÂà∞Êñá‰ª∂ ‰ΩÜÊòØÊòØblob ‰∫åËøõÂà∂ËµÑÊ∫ê\n      this.croppa.generateBlob((blob) => {\n        //‰∫åËøõÂà∂ËΩ¨Êñá‰ª∂\n        const file = new File([blob], 'backImg', {\n          type: 'image/jpeg',\n        });\n        var fd = new FormData()\n        fd.append('image', file);\n        fd.append('type', 'avatar');\n\n        //ÂèëÈÄÅaxiosÊõ¥ÊîπÂõæÁâá\n        this.$server.uploadImg(fd).then(data => {\n\n          if (data == 2) {\n            //‰∏ä‰º†Â§±Ë¥•ÊèêÁ§∫\n            this.$message({\n              type: 'success',\n              message: '‰∏ä‰º†Â§±Ë¥• üòì'\n            });\n            return false;\n          }\n          //‰∏ä‰º†ÊàêÂäüÊèêÁ§∫\n          this.$message({\n            type: 'success',\n            message: '‰∏ä‰º†ÊàêÂäü üòä'\n          });\n\n          //Êõ¥ÊîπÈªòËÆ§ÂõæÁâáË∑ØÂæÑ\n          this.user.avatar = data;\n          this.setuser(this.user);\n          this.centerDialogVisible = false;//‰øÆÊîπÂ§¥ÂÉèÁöÑÂØπËØùÊ°ÜÊéßÂà∂\n        }).catch(err => {\n          // eslint-disable-next-line no-console\n          console.log('err', err);\n        })\n        return false;\n      })\n    },\n    //ÁÇπÂáªÂèñÊ∂à‰øÆÊîπÂ§¥ÂÉèÊåâÈíÆ\n    noEditAvatar () {\n      this.croppa.refresh();\n    },\n    //ÁßªÈô§Â§¥ÂÉè\n    removeAvatarImg () {\n      this.$confirm('ÁßªÈô§ËÉåÊôØÂ§¥ÂÉè, ÊòØÂê¶ÁªßÁª≠?', 'ÊèêÁ§∫', {\n        confirmButtonText: 'Á°ÆÂÆö',\n        cancelButtonText: 'ÂèñÊ∂à',\n        type: 'warning'\n      }).then(() => {\n\n        //ÂèÇÊï∞\n        let paramsObj = {\n          type: 'avatar',\n        }\n        //ÂèëÈÄÅaxios Âà†Èô§ÂõæÁâá\n        this.$server.deleteImg(paramsObj).then(data => {\n          if (data == 2) {\n            this.$message({\n              type: 'warning',\n              message: 'ËøòÊ≤°ÊúâÂ§¥ÂÉè üòì'\n            });\n            return false;\n          }\n          //Êõ¥ÊîπÈªòËÆ§ÂõæÁâáË∑ØÂæÑ\n          this.user.avatar = '';\n          //Ëß¶ÂèëÊèí‰ª∂ÁßªÈô§\n          this.croppa.remove();\n          //ÊàêÂäüÊèêÁ§∫\n          this.$message({\n            type: 'success',\n            message: 'ÁßªÈô§ÊàêÂäü!'\n          });\n          this.user.avatar = '';\n          this.setuser(this.user);\n\n\n        }).catch(err => {\n          // eslint-disable-next-line no-console\n          console.log(err)\n        })\n\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: 'Â∑≤ÂèñÊ∂à'\n        });\n      });\n    }\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/User","sourcesContent":["<style scoped lang=\"scss\">\n@import \"@/assets/css/user.scss\";\n</style>\n\n\n<template>\n  <div id=\"user\"\n       v-loading=\"loading\">\n    <div id=\"user-head\">\n\n      <croppa class=\"user-backgroundImg\"\n              v-bind:style=\"cursorFlag ? 'cursor:move' : 'cursor:default'\"\n              v-model=\"croppa\"\n              :width=width\n              :height=height\n              placeholder=\"ËÉåÊôØÂõæÁâá üò≤\"\n              :placeholder-font-size=\"30\"\n              :disabled=\"false\"\n              accept=\"image/png,image/jpeg,image/jpg,image/gif\"\n              :prevent-white-space=\"true\"\n              :disable-scroll-to-zoom=\"true\"\n              disable-click-to-choose\n              :show-remove-button=\"false\"\n              @new-image-drawn=\"onNewImage\"\n              @zoom=\"onZoom\"\n              remove-button-color=\"#1DA1F2\">\n        <img crossOrigin=\"anonymous\"\n             :width=width\n             :src=\"detail.backgroundImg ? root+detail.backgroundImg : ''\"\n             slot=\"initial\">\n        <el-button round\n                   v-if=\"alterImgFlag & state\"\n                   id=\"alterImg\"\n                   @click=\"alterImg()\"\n                   style=\"\">ÁºñËæëÂõæÁâá</el-button>\n      </croppa>\n\n      <div id=\"user-head-foot\"\n           v-bind:style=\"{ width: width+'px'}\">\n\n        <div id=\"user-head-foot-main\">\n\n          <el-dropdown>\n            <span class=\"el-dropdown-link HeadPicSpan\">\n              <avatar class=\"headPic\"\n                      :size=\"200\"\n                      :src=\"user.avatar ? this.root+user.avatar : ''\"\n                      background-color=\"#1DA1F2\"\n                      :username=\"user.name || '' \"></avatar>\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n\n              <el-dropdown-item>\n                <span @click=\"centerDialogVisible = true\"><i class=\"el-icon-picture-outline\"></i> ‰øÆÊîπÂ§¥ÂÉè</span>\n              </el-dropdown-item>\n\n            </el-dropdown-menu>\n          </el-dropdown>\n\n          <transition mode=\"out-in\"\n                      name=\"slide-fade\">\n            <div v-if=\"alterImgFlag\"\n                 key=\"usernav\"\n                 id=\"user-head-foot-nav\">\n\n              <div class=\"foot-nav-list\">\n                <i class=\"el-icon-edit-outline\"></i>\n                ÂÜôÁöÑÊñáÁ´†\n              </div>\n              <div class=\"foot-nav-list\">\n                <i class=\"el-icon-picture\"></i>\n                ÊãçÁöÑÁÖßÁâá\n              </div>\n              <div class=\"foot-nav-list\">\n                <!-- <i class=\"el-icon-view\"></i> -->\n                ÂÖ≥Ê≥®‰∫Ü\n              </div>\n              <div class=\"foot-nav-list\">\n                <!-- <i class=\"el-icon-picture\"></i> -->\n                ÂÖ≥Ê≥®ËÄÖ\n              </div>\n              <span v-if=\"alterDetail\">\n                <router-link :to=\"'/user/'+user.id+'/alterDetail'\"\n                             id=\"edit-information-btn\"\n                             @click.native=\"alterDetails()\"\n                             v-if=\"verbState && self.id == user.id\">ÁºñËæë‰∏™‰∫∫ËµÑÊñô</router-link>\n\n                <div v-else\n                     id=\"follow-btn\">ÂÖ≥Ê≥®</div>\n              </span>\n              <span v-else>\n                <router-link :to=\"'/user/'+user.id\"\n                             id=\"edit-information-btn\"\n                             @click.native=\"alterDetails()\"\n                             v-if=\"verbState && self.id == user.id\">ÂèñÊ∂à</router-link>\n\n                <div v-else\n                     id=\"follow-btn\">ÂÖ≥Ê≥®</div>\n              </span>\n            </div>\n            <div v-else\n                 id=\"user-head-foot-nav-alterImg\"\n                 key=\"img\">\n              <input class=\"user-head-foot-nav-alterImg_btn\"\n                     type=\"range\"\n                     id=\"range\"\n                     @input=\"onSliderChange\"\n                     :min=\"sliderMin\"\n                     :max=\"sliderMax\"\n                     step=\".001\"\n                     v-model=\"sliderVal\">\n              <el-button @click=\"croppa.chooseFile()\"\n                         class=\"user-head-foot-nav-alterImg_btn\"\n                         round\n                         plain>ÈÄâÊã©ËÉåÊôØ</el-button>\n              <el-button type=\"primary\"\n                         class=\"user-head-foot-nav-alterImg_btn\"\n                         round\n                         @click=\"upload\"\n                         plain>‰øùÂ≠ò</el-button>\n              <el-button type=\"info\"\n                         class=\"user-head-foot-nav-alterImg_btn\"\n                         @click=\"alterImg()\"\n                         round>ÂèñÊ∂à</el-button>\n              <el-button type=\"danger\"\n                         class=\"user-head-foot-nav-alterImg_btn\"\n                         @click=\"removeBackgroundImg()\"\n                         icon=\"el-icon-delete\"\n                         circle></el-button>\n            </div>\n          </transition>\n        </div>\n      </div>\n    </div>\n    <transition mode=\"out-in\"\n                name=\"slide-fade\">\n      <router-view></router-view>\n    </transition>\n\n    <!-- Êõ¥ÊîπÂ§¥ÂÉèstart -->\n    <el-dialog title=\"Êõ¥ÊîπÂ§¥ÂÉè\"\n               :visible.sync=\"centerDialogVisible\"\n               width=\"40%\"\n               center>\n      <center>\n        <croppa class=\"user-backgroundImg changeAvatar\"\n                v-model=\"croppa\"\n                :width=208\n                :height=208\n                placeholder=\"Avatar üòé\"\n                placeholder-color=\"white\"\n                :placeholder-font-size=\"30\"\n                :disabled=\"false\"\n                accept=\"image/png,image/jpeg,image/jpg,image/gif\"\n                :prevent-white-space=\"true\"\n                :disable-scroll-to-zoom=\"true\"\n                disable-click-to-choose\n                :show-remove-button=\"false\"\n                @new-image-drawn=\"onNewImage\"\n                @init=\"onInit\"\n                @zoom=\"onZoom\">\n          <img crossOrigin=\"anonymous\"\n               :width=width\n               :src=\"user.avatar ? root+user.avatar : ''\"\n               slot=\"initial\">\n        </croppa>\n        <div id=\"changeAvatarBtn\">\n          <el-button @click=\"croppa.chooseFile()\"\n                     class=\"user-head-foot-nav-alterImg_btn\"\n                     round\n                     plain>ÈÄâÊã©ÂõæÁâá</el-button>\n          <input class=\"user-head-foot-nav-alterImg_btn\"\n                 type=\"range\"\n                 id=\"range\"\n                 @input=\"onSliderChange\"\n                 :min=\"sliderMin\"\n                 :max=\"sliderMax\"\n                 step=\".001\"\n                 v-model=\"sliderVal\">\n          <el-button type=\"primary\"\n                     class=\"user-head-foot-nav-alterImg_btn\"\n                     round\n                     @click=\"uploadAvatar\"\n                     plain>‰øùÂ≠ò</el-button>\n          <el-button type=\"info\"\n                     class=\"user-head-foot-nav-alterImg_btn\"\n                     @click=\"centerDialogVisible = false, noEditAvatar()\"\n                     round>ÂèñÊ∂à</el-button>\n          <el-button type=\"danger\"\n                     class=\"user-head-foot-nav-alterImg_btn\"\n                     @click=\"removeAvatarImg()\"\n                     icon=\"el-icon-delete\"\n                     circle></el-button>\n        </div>\n      </center>\n    </el-dialog>\n    <!-- Êõ¥ÊîπÂ§¥ÂÉèend -->\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapMutations } from 'vuex'\nexport default {\n  data () {\n    return {\n      state: false,//Âà§Êñ≠ÊòØ‰∏çÊòØÊú¨‰∫∫\n      user: {},//Áî®Êà∑Âü∫Êú¨‰ø°ÊÅØ\n      detail: {},//Áî®Êà∑ËØ¶ÊÉÖ\n      loading: true,\n      width: '',\n      height: 230,\n      //ÂàùÂßãÂåñËÉåÊôØÂõæÊèí‰ª∂\n      croppa: {},\n      //ÂàùÂßãÂåñÂõæÁâáÊªëÂä®ÊîæÂ§ßÁº©Â∞èinput range\n      sliderVal: 0,\n      sliderMin: 0,\n      sliderMax: 0,\n      root: '',//ÁΩëÁ´ôapiÊ†πÁõÆÂΩï\n      alterImgFlag: true,//ÊòØÂê¶Âá∫Áé∞Â§ÑÁêÜËÉåÊôØÂõæÁâáÊåâÈíÆ\n      freshFlag: false,//Âà§Êñ≠ÊòØÂê¶‰∏ä‰º†ËøáÂõæÁâá\n      alterDetail: true,//Ë∑≥ËΩ¨Âà∞ÁºñËæë‰∏™‰∫∫ËµÑÊñôÂºÄÂÖ≥\n      cursorFlag: false,//ÊéßÂà∂Èº†Ê†áÂú®ËÉåÊôØÂõæ‰∏äÁöÑÊ†∑Âºè\n      centerDialogVisible: false,//‰øÆÊîπÂ§¥ÂÉèÁöÑÂØπËØùÊ°ÜÊéßÂà∂\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'verbState',//ÁôªÂΩïÁä∂ÊÄÅ\n      'token',//ÁôªÂΩïÁöÑÁî®Êà∑ÁöÑtoken\n      'self',//Ëé∑ÂèñÂΩìÂâçÁôªÂΩïÁöÑÁî®Êà∑‰ø°ÊÅØ\n    ]),\n  },\n  //ÁõëÂê¨Ë∑ØÁî±ÂèòÂåñ\n  watch: {\n    $route () {\n      //Ëé∑ÂèñÁΩëÈ°µurlÂà§Êñ≠ÊòØÂê¶Âú®Êõ¥ÊîπËØ¶ÊÉÖÈ°µÈù¢\n      if (this.$route.path.endsWith('alterDetail')) this.alterDetail = false;\n    }\n  },\n  created: function () {\n\n    //Ëé∑ÂèñÊµèËßàÂô®Á™óÂè£ÁöÑÂÆΩÂ∫¶ ÁÑ∂ÂêéËµãÂÄºÁªôËÉåÊôØÂõæÁâáÂÆΩÂ∫¶\n    this.width = window.screen.width;\n    //Âà§Êñ≠ÊòØÂê¶ÁôªÂΩï\n    this.state = localStorage.getItem('verbState');\n    //Ëé∑ÂèñË∑ØÁî±‰º†ÈÄíËøáÊù•ÁöÑÁî®Êà∑id\n    this.id = this.$route.params.id;\n\n    //Êï∞ÊçÆ\n    let paramsObj = {\n      id: this.id,\n    }\n    //ÂèëÈÄÅaxios Ëé∑Âèñ‰º†ÈÄíËøáÊù•idÂØπÁî®ÁöÑÁî®Êà∑ÁöÑÊï∞ÊçÆ\n    this.$server.getInformation(paramsObj).then(data => {\n      //Ëé∑ÂèñÂà∞Áî®Êà∑ÁöÑÂü∫Êú¨‰ø°ÊÅØ\n      this.user = data;\n      //Ëé∑ÂèñÂà∞Áî®Êà∑ÁöÑËØ¶ÁªÜ‰ø°ÊÅØ\n      this.detail = data.user_detail;\n      //Âà§Êñ≠Áî®Êà∑ÊòØÂê¶ÊúâËÉåÊôØÂõæÁâá ‰∏îÊòØÂê¶ÊòØÊú¨‰∫∫È°µÈù¢ ÁÑ∂ÂêéÊõ¥ÊîπÈ´òÂ∫¶\n      //‰πãÊâÄ‰ª•‰ΩøÁî®ÂÆöÊó∂Âô® ÊòØÂõ†‰∏∫ÊàëÂà´Êó†‰ªñÊ≥ï Âè™ËÉΩÁî®ÂÆöÊó∂Âô®Âª∂ËøüÁÑ∂ÂêéËé∑ÂèñÊï∞ÊçÆ\n      setTimeout(() => {\n        if (this.user.backgroundImg != null || this.user.id == this.self.id) {\n          this.state = true;\n          this.height = 430;\n        }\n      }, 200);\n\n    }).catch(err => {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    })\n  },\n  mounted: function () {\n    //ÁΩëÈ°µÂä†ËΩΩÁä∂ÊÄÅ\n    this.loading = false;\n    //apiÂú∞ÂùÄ\n    this.root = this.$URL;\n    //Ëé∑ÂèñÁΩëÈ°µurlÂà§Êñ≠ÊòØÂê¶Âú®Êõ¥ÊîπËØ¶ÊÉÖÈ°µÈù¢\n    if (this.$route.path.endsWith('alterDetail')) this.alterDetail = false;\n  },\n  methods: {\n    ...mapMutations({\n      setuser: 'SET_USER',\n    }),\n    onFileTypeMismatch () {\n      this.$message({\n        message: 'Êñá‰ª∂Ê†ºÂºè‰∏çÂØπÂë¶ üò≥',\n        type: 'warning',\n      })\n    },\n    onNewImage () {\n      this.sliderVal = this.croppa.scaleRatio\n      this.sliderMin = this.croppa.scaleRatio / 2\n      this.sliderMax = this.croppa.scaleRatio * 5\n    },\n\n    onSliderChange (evt) {\n      var increment = evt.target.value\n      this.croppa.scaleRatio = +increment\n    },\n\n    onZoom () {\n      // To prevent zooming out of range when using scrolling to zoom\n      // if (this.sliderMax && this.croppa.scaleRatio >= this.sliderMax) {\n      //   this.croppa.scaleRatio = this.sliderMax\n      // } else if (this.sliderMin && this.croppa.scaleRatio <= this.sliderMin) {\n      //   this.croppa.scaleRatio = this.sliderMin\n      // }\n\n      this.sliderVal = this.croppa.scaleRatio\n    },\n    upload () {\n\n      //Âà§Êñ≠ÊòØÂê¶ÊúâÂõæÁâáÈÄâ‰∏≠\n      if (!this.croppa.hasImage()) {\n        this.$message({\n          message: '‰Ω†ËøòÊ≤°ÊúâÈÄâÊã©ÂõæÁâá üò≥',\n          type: 'warning'\n        });\n\n        return false;\n      }\n\n      //Ëé∑ÂèñÂà∞Êñá‰ª∂ ‰ΩÜÊòØÊòØblob ‰∫åËøõÂà∂ËµÑÊ∫ê\n      this.croppa.generateBlob((blob) => {\n        //‰∫åËøõÂà∂ËΩ¨Êñá‰ª∂\n        const file = new File([blob], 'backImg', {\n          type: 'image/jpeg',\n        });\n        var fd = new FormData()\n        fd.append('image', file);\n        fd.append('type', 'backgroundImg');\n\n        //ÂèëÈÄÅaxiosÊõ¥ÊîπÂõæÁâá\n        this.$server.uploadImg(fd).then(data => {\n          //Êõ¥ÊîπÈªòËÆ§ÂõæÁâáË∑ØÂæÑ\n          this.detail.backgroundImg = data;\n          //Êõ¥ÊîπÊåâÈíÆÁä∂ÊÄÅ\n          this.alterImgFlag = !this.alterImgFlag;\n          //‰∏ä‰º†ÊàêÂäüÊèêÁ§∫\n          this.$message({\n            type: 'success',\n            message: '‰∏ä‰º†ÊàêÂäü üòä'\n          });\n        }).catch(err => {\n          // eslint-disable-next-line no-console\n          console.log('err', err);\n        })\n\n\n        return false;\n      })\n    },\n    alterImg () {\n      this.alterImgFlag = !this.alterImgFlag;\n      this.cursorFlag = !this.cursorFlag;\n      this.croppa.refresh()\n    },\n    removeBackgroundImg () {\n      this.$confirm('ÁßªÈô§ËÉåÊôØ, ÊòØÂê¶ÁªßÁª≠?', 'ÊèêÁ§∫', {\n        confirmButtonText: 'Á°ÆÂÆö',\n        cancelButtonText: 'ÂèñÊ∂à',\n        type: 'warning'\n      }).then(() => {\n\n        //ÂèÇÊï∞\n        let paramsObj = {\n          type: 'backgroundImg',\n        }\n        //ÂèëÈÄÅaxios Âà†Èô§ÂõæÁâá\n        this.$server.deleteImg(paramsObj).then(data => {\n          if (data == 2) {\n            this.$message({\n              type: 'warning',\n              message: 'ËøòÊ≤°ÊúâËÉåÊôØÂõæ üòì'\n            });\n            return false;\n          }\n          //Êõ¥ÊîπÈªòËÆ§ÂõæÁâáË∑ØÂæÑ\n          this.detail.backgroundImg = '';\n          //Ëß¶ÂèëÊèí‰ª∂ÁßªÈô§\n          this.croppa.remove();\n          //ÊàêÂäüÊèêÁ§∫\n          this.$message({\n            type: 'success',\n            message: 'ÁßªÈô§ÊàêÂäü!'\n          });\n          //Êõ¥ÊîπÊåâÈíÆÁä∂ÊÄÅ\n          this.alterImgFlag = !this.alterImgFlag;\n\n        }).catch(err => {\n          // eslint-disable-next-line no-console\n          console.log(err)\n        })\n\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: 'Â∑≤ÂèñÊ∂à'\n        });\n      });\n    },\n    alterDetails () {\n      this.alterDetail = !this.alterDetail;\n    },\n    //Êõ¥ÊîπÂ§¥ÂÉèÁöÑcroppa Êõ¥Êîπ‰∏∫ÂúÜÂúà\n    onInit () {\n      this.croppa.addClipPlugin(function (ctx, x, y, w, h) {\n        /*\n         * ctx: canvas context\n         * x: start point (top-left corner) x coordination\n         * y: start point (top-left corner) y coordination\n         * w: croppa width\n         * h: croppa height\n        */\n\n        ctx.beginPath()\n        ctx.arc(x + w / 2, y + h / 2, w / 2, 0, 2 * Math.PI, true)\n        ctx.closePath()\n      })\n    },\n    //‰∏ä‰º†Â§¥ÂÉèÁöÑÊñπÊ≥ï\n    uploadAvatar () {\n\n      //Âà§Êñ≠ÊòØÂê¶ÊúâÂõæÁâáÈÄâ‰∏≠\n      if (!this.croppa.hasImage()) {\n        this.$message({\n          message: '‰Ω†ËøòÊ≤°ÊúâÈÄâÊã©ÂõæÁâá üò≥',\n          type: 'warning'\n        });\n\n        return false;\n      }\n\n      //Ëé∑ÂèñÂà∞Êñá‰ª∂ ‰ΩÜÊòØÊòØblob ‰∫åËøõÂà∂ËµÑÊ∫ê\n      this.croppa.generateBlob((blob) => {\n        //‰∫åËøõÂà∂ËΩ¨Êñá‰ª∂\n        const file = new File([blob], 'backImg', {\n          type: 'image/jpeg',\n        });\n        var fd = new FormData()\n        fd.append('image', file);\n        fd.append('type', 'avatar');\n\n        //ÂèëÈÄÅaxiosÊõ¥ÊîπÂõæÁâá\n        this.$server.uploadImg(fd).then(data => {\n\n          if (data == 2) {\n            //‰∏ä‰º†Â§±Ë¥•ÊèêÁ§∫\n            this.$message({\n              type: 'success',\n              message: '‰∏ä‰º†Â§±Ë¥• üòì'\n            });\n            return false;\n          }\n          //‰∏ä‰º†ÊàêÂäüÊèêÁ§∫\n          this.$message({\n            type: 'success',\n            message: '‰∏ä‰º†ÊàêÂäü üòä'\n          });\n\n          //Êõ¥ÊîπÈªòËÆ§ÂõæÁâáË∑ØÂæÑ\n          this.user.avatar = data;\n          this.setuser(this.user);\n          this.centerDialogVisible = false;//‰øÆÊîπÂ§¥ÂÉèÁöÑÂØπËØùÊ°ÜÊéßÂà∂\n        }).catch(err => {\n          // eslint-disable-next-line no-console\n          console.log('err', err);\n        })\n        return false;\n      })\n    },\n    //ÁÇπÂáªÂèñÊ∂à‰øÆÊîπÂ§¥ÂÉèÊåâÈíÆ\n    noEditAvatar () {\n      this.croppa.refresh();\n    },\n    //ÁßªÈô§Â§¥ÂÉè\n    removeAvatarImg () {\n      this.$confirm('ÁßªÈô§ËÉåÊôØÂ§¥ÂÉè, ÊòØÂê¶ÁªßÁª≠?', 'ÊèêÁ§∫', {\n        confirmButtonText: 'Á°ÆÂÆö',\n        cancelButtonText: 'ÂèñÊ∂à',\n        type: 'warning'\n      }).then(() => {\n\n        //ÂèÇÊï∞\n        let paramsObj = {\n          type: 'avatar',\n        }\n        //ÂèëÈÄÅaxios Âà†Èô§ÂõæÁâá\n        this.$server.deleteImg(paramsObj).then(data => {\n          if (data == 2) {\n            this.$message({\n              type: 'warning',\n              message: 'ËøòÊ≤°ÊúâÂ§¥ÂÉè üòì'\n            });\n            return false;\n          }\n          //Êõ¥ÊîπÈªòËÆ§ÂõæÁâáË∑ØÂæÑ\n          this.user.avatar = '';\n          //Ëß¶ÂèëÊèí‰ª∂ÁßªÈô§\n          this.croppa.remove();\n          //ÊàêÂäüÊèêÁ§∫\n          this.$message({\n            type: 'success',\n            message: 'ÁßªÈô§ÊàêÂäü!'\n          });\n          this.user.avatar = '';\n          this.setuser(this.user);\n\n\n        }).catch(err => {\n          // eslint-disable-next-line no-console\n          console.log(err)\n        })\n\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: 'Â∑≤ÂèñÊ∂à'\n        });\n      });\n    }\n  }\n}\n</script>"]}]}