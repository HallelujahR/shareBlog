{"remainingRequest":"/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/blog/blog/src/components/User/detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/local/var/www/blog/blog/src/components/User/detail.vue","mtime":1547793389103},{"path":"/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapActions } from 'vuex';\nexport default {\n  data () {\n    return {\n      dynamicTags: ['篮球', '摄影', '看书'],// 爱好标签\n      inputVisible: false,\n      inputValue: '',\n\n      detail: {},\n      labelPosition: 'left',//form表单对齐方式\n\n      loading: true,\n      ruleForm: {\n        phone: '',//手机号\n        name: '',//昵称\n        introduction: '',//一句话\n        education: '',//教育\n        occupation: '',//职业\n        hobby: '',//爱好\n        web: '',//个人站点\n\n      },\n\n      rules: {\n        name: [\n          { required: true, message: '请填写昵称', trigger: 'blur' },\n          { min: 3, max: 10, message: '长度在 2 到 10 个字符', trigger: 'blur' }\n        ],\n        introduction: [\n          { required: true, message: '请填写介绍', trigger: 'blur' },\n          { min: 3, max: 40, message: '长度在 3 到 40 个字符', trigger: 'blur' }\n        ],\n        education: [\n          { required: true, message: '请填写教育', trigger: 'blur' },\n          { min: 2, max: 40, message: '长度在 2 到 40 个字符', trigger: 'blur' }\n        ],\n        occupation: [\n          { required: true, message: '请填写职业', trigger: 'blur' },\n          { min: 2, max: 40, message: '长度在 2 到 40 个字符', trigger: 'blur' }\n        ],\n        web: [\n          { pattern: /^([hH][tT]{2}[pP]:\\/\\/|[hH][tT]{2}[pP][sS]:\\/\\/)(([A-Za-z0-9-~]+)\\.)+([A-Za-z0-9-~\\\\/])+$/, message: '网站格式不正确', trigger: 'blur' }\n        ]\n\n      }\n    }\n  },\n  mounted () {\n    this.loading = false;\n  },\n  computed: {\n\n  },\n  created: function () {\n\n    //获取路由传递过来的用户id\n    this.id = this.$route.params.id;\n    //数据\n    let paramsObj = {\n      id: this.id,\n    }\n    //发送axios 获取传递过来id对用的用户的数据\n    this.$server.getInformation(paramsObj).then(data => {\n      //获取到用户的基本信息\n      this.user = data;\n      //获取到用户的详细信息\n      //把获取到的相信信息更新到当前页面\n      this.ruleForm = data.user_detail;\n      this.ruleForm['name'] = data.name;\n      this.ruleForm['phone'] = data.phone;\n      this.ruleForm['introduction'] = data.introduction;\n\n    }).catch(err => {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    })\n  },\n  methods: {\n    //用来设置vuex的数据\n    ...mapActions([\n      'setUser',\n    ]),\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        //判断表单数据是否正确\n        if (valid) {\n          //获取表单数据\n          let paramObj = this.ruleForm;\n          //发送请求更改用户信息\n          this.$server.editDetail(paramObj).then(data => {\n\n            //提示信息\n            this.$message({\n              type: 'success',\n              message: '修改成功 😊'\n            });\n            // eslint-disable-next-line no-console\n            console.log(this.setUser);\n            //成功后更改用户本地信息\n            this.setUser(data);\n\n\n          }).catch(err => {\n            this.$message({\n              type: 'warning',\n              message: '修改失败 😓'\n            });\n            // eslint-disable-next-line no-console\n            console.log(err);\n          })\n\n        } else {\n          alert('error submit!!');\n          return false;\n        }\n      });\n    },\n    resetForm (formName) {\n      //重制表单\n      this.$refs[formName].resetFields();\n    },\n    //爱好 标签的相关操作\n    handleClose (tag) {\n      this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\n    },\n\n    //添加爱好的相关操作\n    showInput () {\n      this.inputVisible = true;\n      this.$nextTick(() => {\n        this.$refs.saveTagInput.$refs.input.focus();\n      });\n    },\n    //添加爱好的相关操作\n    handleInputConfirm () {\n      let inputValue = this.inputValue;\n      if (inputValue) {\n        this.dynamicTags.push(inputValue);\n      }\n      this.inputVisible = false;\n      this.inputValue = '';\n    }\n  }\n}\n",null]}