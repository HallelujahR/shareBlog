{"remainingRequest":"/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js!/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/blog/blog/src/components/User/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/local/var/www/blog/blog/src/components/User/index.vue","mtime":1552391023559},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.ends-with\";\nimport _objectSpread from \"/usr/local/var/www/blog/blog/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters, mapMutations } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      state: false,\n      //åˆ¤æ–­æ˜¯ä¸æ˜¯æœ¬äºº\n      user: {},\n      //ç”¨æˆ·åŸºæœ¬ä¿¡æ¯\n      detail: {},\n      //ç”¨æˆ·è¯¦æƒ…\n      loading: true,\n      width: '',\n      height: 230,\n      //åˆå§‹åŒ–èƒŒæ™¯å›¾æ’ä»¶\n      croppa: {},\n      //åˆå§‹åŒ–å›¾ç‰‡æ»‘åŠ¨æ”¾å¤§ç¼©å°input range\n      sliderVal: 0,\n      sliderMin: 0,\n      sliderMax: 0,\n      root: '',\n      //ç½‘ç«™apiæ ¹ç›®å½•\n      alterImgFlag: true,\n      //æ˜¯å¦å‡ºç°å¤„ç†èƒŒæ™¯å›¾ç‰‡æŒ‰é’®\n      freshFlag: false,\n      //åˆ¤æ–­æ˜¯å¦ä¸Šä¼ è¿‡å›¾ç‰‡\n      alterDetail: true,\n      //è·³è½¬åˆ°ç¼–è¾‘ä¸ªäººèµ„æ–™å¼€å…³\n      cursorFlag: false,\n      //æ§åˆ¶é¼ æ ‡åœ¨èƒŒæ™¯å›¾ä¸Šçš„æ ·å¼\n      centerDialogVisible: false //ä¿®æ”¹å¤´åƒçš„å¯¹è¯æ¡†æ§åˆ¶\n\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['verbState', //ç™»å½•çŠ¶æ€\n  'token', //ç™»å½•çš„ç”¨æˆ·çš„token\n  'self'])),\n  //ç›‘å¬è·¯ç”±å˜åŒ–\n  watch: {\n    $route: function $route() {\n      //è·å–ç½‘é¡µurlåˆ¤æ–­æ˜¯å¦åœ¨æ›´æ”¹è¯¦æƒ…é¡µé¢\n      if (this.$route.path.endsWith('alterDetail')) this.alterDetail = false;\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    //è·å–æµè§ˆå™¨çª—å£çš„å®½åº¦ ç„¶åèµ‹å€¼ç»™èƒŒæ™¯å›¾ç‰‡å®½åº¦\n    this.width = window.screen.width; //åˆ¤æ–­æ˜¯å¦ç™»å½•\n\n    this.state = localStorage.getItem('verbState'); //è·å–è·¯ç”±ä¼ é€’è¿‡æ¥çš„ç”¨æˆ·id\n\n    this.id = this.$route.params.id; //æ•°æ®\n\n    var paramsObj = {\n      id: this.id //å‘é€axios è·å–ä¼ é€’è¿‡æ¥idå¯¹ç”¨çš„ç”¨æˆ·çš„æ•°æ®\n\n    };\n    this.$server.getInformation(paramsObj).then(function (data) {\n      //è·å–åˆ°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯\n      _this.user = data;\n      console.log(_this.user); //è·å–åˆ°ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯\n\n      _this.detail = data.user_detail; //åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰èƒŒæ™¯å›¾ç‰‡ ä¸”æ˜¯å¦æ˜¯æœ¬äººé¡µé¢ ç„¶åæ›´æ”¹é«˜åº¦\n      //ä¹‹æ‰€ä»¥ä½¿ç”¨å®šæ—¶å™¨ æ˜¯å› ä¸ºæˆ‘åˆ«æ— ä»–æ³• åªèƒ½ç”¨å®šæ—¶å™¨å»¶è¿Ÿç„¶åè·å–æ•°æ®\n\n      setTimeout(function () {\n        if (_this.user.backgroundImg != '' || _this.user.id == _this.self.id || _this.user.backgroundImg != null) {\n          _this.height = 430;\n        }\n      }, 200);\n    }).catch(function (err) {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    });\n  },\n  mounted: function mounted() {\n    //ç½‘é¡µåŠ è½½çŠ¶æ€\n    this.loading = false; //apiåœ°å€\n\n    this.root = this.$URL; //è·å–ç½‘é¡µurlåˆ¤æ–­æ˜¯å¦åœ¨æ›´æ”¹è¯¦æƒ…é¡µé¢\n\n    if (this.$route.path.endsWith('alterDetail')) this.alterDetail = false;\n  },\n  methods: _objectSpread({}, mapMutations({\n    setuser: 'SET_USER'\n  }), {\n    onFileTypeMismatch: function onFileTypeMismatch() {\n      this.$message({\n        message: 'æ–‡ä»¶æ ¼å¼ä¸å¯¹å‘¦ ğŸ˜³',\n        type: 'warning'\n      });\n    },\n    onNewImage: function onNewImage() {\n      this.sliderVal = this.croppa.scaleRatio;\n      this.sliderMin = this.croppa.scaleRatio / 2;\n      this.sliderMax = this.croppa.scaleRatio * 5;\n    },\n    onSliderChange: function onSliderChange(evt) {\n      var increment = evt.target.value;\n      this.croppa.scaleRatio = +increment;\n    },\n    onZoom: function onZoom() {\n      // To prevent zooming out of range when using scrolling to zoom\n      // if (this.sliderMax && this.croppa.scaleRatio >= this.sliderMax) {\n      //   this.croppa.scaleRatio = this.sliderMax\n      // } else if (this.sliderMin && this.croppa.scaleRatio <= this.sliderMin) {\n      //   this.croppa.scaleRatio = this.sliderMin\n      // }\n      this.sliderVal = this.croppa.scaleRatio;\n    },\n    upload: function upload() {\n      var _this2 = this;\n\n      //åˆ¤æ–­æ˜¯å¦æœ‰å›¾ç‰‡é€‰ä¸­\n      if (!this.croppa.hasImage()) {\n        this.$message({\n          message: 'ä½ è¿˜æ²¡æœ‰é€‰æ‹©å›¾ç‰‡ ğŸ˜³',\n          type: 'warning'\n        });\n        return false;\n      } //è·å–åˆ°æ–‡ä»¶ ä½†æ˜¯æ˜¯blob äºŒè¿›åˆ¶èµ„æº\n\n\n      this.croppa.generateBlob(function (blob) {\n        //äºŒè¿›åˆ¶è½¬æ–‡ä»¶\n        var file = new File([blob], 'backImg', {\n          type: 'image/jpeg'\n        });\n        var fd = new FormData();\n        fd.append('image', file);\n        fd.append('type', 'backgroundImg'); //å‘é€axiosæ›´æ”¹å›¾ç‰‡\n\n        _this2.$server.uploadImg(fd).then(function (data) {\n          //æ›´æ”¹é»˜è®¤å›¾ç‰‡è·¯å¾„\n          _this2.detail.backgroundImg = data; //æ›´æ”¹æŒ‰é’®çŠ¶æ€\n\n          _this2.alterImgFlag = !_this2.alterImgFlag; //ä¸Šä¼ æˆåŠŸæç¤º\n\n          _this2.$message({\n            type: 'success',\n            message: 'ä¸Šä¼ æˆåŠŸ ğŸ˜Š'\n          });\n        }).catch(function (err) {\n          // eslint-disable-next-line no-console\n          console.log('err', err);\n        });\n\n        return false;\n      });\n    },\n    alterImg: function alterImg() {\n      this.alterImgFlag = !this.alterImgFlag;\n      this.cursorFlag = !this.cursorFlag;\n      this.croppa.refresh();\n    },\n    removeBackgroundImg: function removeBackgroundImg() {\n      var _this3 = this;\n\n      this.$confirm('ç§»é™¤èƒŒæ™¯, æ˜¯å¦ç»§ç»­?', 'æç¤º', {\n        confirmButtonText: 'ç¡®å®š',\n        cancelButtonText: 'å–æ¶ˆ',\n        type: 'warning'\n      }).then(function () {\n        //å‚æ•°\n        var paramsObj = {\n          type: 'backgroundImg' //å‘é€axios åˆ é™¤å›¾ç‰‡\n\n        };\n\n        _this3.$server.deleteImg(paramsObj).then(function (data) {\n          if (data == 2) {\n            _this3.$message({\n              type: 'warning',\n              message: 'è¿˜æ²¡æœ‰èƒŒæ™¯å›¾ ğŸ˜“'\n            });\n\n            return false;\n          } //æ›´æ”¹é»˜è®¤å›¾ç‰‡è·¯å¾„\n\n\n          _this3.detail.backgroundImg = ''; //è§¦å‘æ’ä»¶ç§»é™¤\n\n          _this3.croppa.remove(); //æˆåŠŸæç¤º\n\n\n          _this3.$message({\n            type: 'success',\n            message: 'ç§»é™¤æˆåŠŸ!'\n          }); //æ›´æ”¹æŒ‰é’®çŠ¶æ€\n\n\n          _this3.alterImgFlag = !_this3.alterImgFlag;\n        }).catch(function (err) {\n          // eslint-disable-next-line no-console\n          console.log(err);\n        });\n      }).catch(function () {\n        _this3.$message({\n          type: 'info',\n          message: 'å·²å–æ¶ˆ'\n        });\n      });\n    },\n    alterDetails: function alterDetails() {\n      this.alterDetail = !this.alterDetail;\n    },\n    //æ›´æ”¹å¤´åƒçš„croppa æ›´æ”¹ä¸ºåœ†åœˆ\n    onInit: function onInit() {\n      this.croppa.addClipPlugin(function (ctx, x, y, w, h) {\n        /*\n         * ctx: canvas context\n         * x: start point (top-left corner) x coordination\n         * y: start point (top-left corner) y coordination\n         * w: croppa width\n         * h: croppa height\n        */\n        ctx.beginPath();\n        ctx.arc(x + w / 2, y + h / 2, w / 2, 0, 2 * Math.PI, true);\n        ctx.closePath();\n      });\n    },\n    //ä¸Šä¼ å¤´åƒçš„æ–¹æ³•\n    uploadAvatar: function uploadAvatar() {\n      var _this4 = this;\n\n      //åˆ¤æ–­æ˜¯å¦æœ‰å›¾ç‰‡é€‰ä¸­\n      if (!this.croppa.hasImage()) {\n        this.$message({\n          message: 'ä½ è¿˜æ²¡æœ‰é€‰æ‹©å›¾ç‰‡ ğŸ˜³',\n          type: 'warning'\n        });\n        return false;\n      } //è·å–åˆ°æ–‡ä»¶ ä½†æ˜¯æ˜¯blob äºŒè¿›åˆ¶èµ„æº\n\n\n      this.croppa.generateBlob(function (blob) {\n        //äºŒè¿›åˆ¶è½¬æ–‡ä»¶\n        var file = new File([blob], 'backImg', {\n          type: 'image/jpeg'\n        });\n        var fd = new FormData();\n        fd.append('image', file);\n        fd.append('type', 'avatar'); //å‘é€axiosæ›´æ”¹å›¾ç‰‡\n\n        _this4.$server.uploadImg(fd).then(function (data) {\n          if (data == 2) {\n            //ä¸Šä¼ å¤±è´¥æç¤º\n            _this4.$message({\n              type: 'success',\n              message: 'ä¸Šä¼ å¤±è´¥ ğŸ˜“'\n            });\n\n            return false;\n          } //ä¸Šä¼ æˆåŠŸæç¤º\n\n\n          _this4.$message({\n            type: 'success',\n            message: 'ä¸Šä¼ æˆåŠŸ ğŸ˜Š'\n          }); //æ›´æ”¹é»˜è®¤å›¾ç‰‡è·¯å¾„\n\n\n          _this4.user.avatar = data;\n\n          _this4.setuser(_this4.user);\n\n          _this4.centerDialogVisible = false; //ä¿®æ”¹å¤´åƒçš„å¯¹è¯æ¡†æ§åˆ¶\n        }).catch(function (err) {\n          // eslint-disable-next-line no-console\n          console.log('err', err);\n        });\n\n        return false;\n      });\n    },\n    //ç‚¹å‡»å–æ¶ˆä¿®æ”¹å¤´åƒæŒ‰é’®\n    noEditAvatar: function noEditAvatar() {\n      this.croppa.refresh();\n    },\n    //ç§»é™¤å¤´åƒ\n    removeAvatarImg: function removeAvatarImg() {\n      var _this5 = this;\n\n      this.$confirm('ç§»é™¤èƒŒæ™¯å¤´åƒ, æ˜¯å¦ç»§ç»­?', 'æç¤º', {\n        confirmButtonText: 'ç¡®å®š',\n        cancelButtonText: 'å–æ¶ˆ',\n        type: 'warning'\n      }).then(function () {\n        //å‚æ•°\n        var paramsObj = {\n          type: 'avatar' //å‘é€axios åˆ é™¤å›¾ç‰‡\n\n        };\n\n        _this5.$server.deleteImg(paramsObj).then(function (data) {\n          if (data == 2) {\n            _this5.$message({\n              type: 'warning',\n              message: 'è¿˜æ²¡æœ‰å¤´åƒ ğŸ˜“'\n            });\n\n            return false;\n          } //æ›´æ”¹é»˜è®¤å›¾ç‰‡è·¯å¾„\n\n\n          _this5.user.avatar = ''; //è§¦å‘æ’ä»¶ç§»é™¤\n\n          _this5.croppa.remove(); //æˆåŠŸæç¤º\n\n\n          _this5.$message({\n            type: 'success',\n            message: 'ç§»é™¤æˆåŠŸ!'\n          });\n\n          _this5.user.avatar = '';\n\n          _this5.setuser(_this5.user);\n        }).catch(function (err) {\n          // eslint-disable-next-line no-console\n          console.log(err);\n        });\n      }).catch(function () {\n        _this5.$message({\n          type: 'info',\n          message: 'å·²å–æ¶ˆ'\n        });\n      });\n    }\n  })\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<style scoped lang=\"scss\">\n@import \"@/assets/css/user.scss\";\n</style>\n\n\n<template>\n  <div id=\"user\"\n       v-loading=\"loading\">\n    <div id=\"user-head\">\n\n      <croppa class=\"user-backgroundImg\"\n              v-bind:style=\"cursorFlag ? 'cursor:move' : 'cursor:default'\"\n              v-model=\"croppa\"\n              :width=width\n              :height=height\n              placeholder=\"èƒŒæ™¯å›¾ç‰‡ ğŸ˜²\"\n              :placeholder-font-size=\"30\"\n              :disabled=\"false\"\n              accept=\"image/png,image/jpeg,image/jpg,image/gif\"\n              :prevent-white-space=\"true\"\n              :disable-scroll-to-zoom=\"true\"\n              disable-click-to-choose\n              :show-remove-button=\"false\"\n              @new-image-drawn=\"onNewImage\"\n              @zoom=\"onZoom\"\n              remove-button-color=\"#1DA1F2\">\n        <img crossOrigin=\"anonymous\"\n             :width=width\n             :src=\"detail.backgroundImg ? root+detail.backgroundImg : ''\"\n             slot=\"initial\">\n        <el-button round\n                   v-if=\"verbState && self.id == user.id\"\n                   id=\"alterImg\"\n                   @click=\"alterImg()\"\n                   style=\"\">ç¼–è¾‘å›¾ç‰‡</el-button>\n      </croppa>\n\n      <div id=\"user-head-foot\"\n           v-bind:style=\"{ width: width+'px'}\">\n\n        <div id=\"user-head-foot-main\">\n          <avatar class=\"headPic\"\n                  :size=\"200\"\n                  :src=\"user.avatar ? this.root+user.avatar : ''\"\n                  background-color=\"#1DA1F2\"\n                  :username=\"user.name || '' \"\n                  v-if=\"!verbState\"></avatar>\n\n          <el-dropdown v-else>\n            <span class=\"el-dropdown-link HeadPicSpan\">\n              <avatar class=\"headPic\"\n                      :size=\"200\"\n                      :src=\"user.avatar ? this.root+user.avatar : ''\"\n                      background-color=\"#1DA1F2\"\n                      :username=\"user.name || '' \"></avatar>\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n\n              <el-dropdown-item v-if=\"verbState && self.id == user.id\">\n                <span @click=\"centerDialogVisible = true\"><i class=\"el-icon-picture-outline\"></i> ä¿®æ”¹å¤´åƒ</span>\n              </el-dropdown-item>\n\n            </el-dropdown-menu>\n          </el-dropdown>\n\n          <transition mode=\"out-in\"\n                      name=\"slide-fade\">\n            <div v-if=\"alterImgFlag\"\n                 key=\"usernav\"\n                 id=\"user-head-foot-nav\">\n\n              <div class=\"foot-nav-list\">\n                <i class=\"el-icon-edit-outline\"></i>\n                å†™çš„æ–‡ç« \n              </div>\n              <div class=\"foot-nav-list\">\n                <i class=\"el-icon-picture\"></i>\n                æ‹çš„ç…§ç‰‡\n              </div>\n              <div class=\"foot-nav-list\">\n                <!-- <i class=\"el-icon-view\"></i> -->\n                å…³æ³¨äº†\n              </div>\n              <div class=\"foot-nav-list\">\n                <!-- <i class=\"el-icon-picture\"></i> -->\n                å…³æ³¨è€…\n              </div>\n              <span v-if=\"alterDetail\">\n                <router-link :to=\"'/user/'+user.id+'/alterDetail'\"\n                             id=\"edit-information-btn\"\n                             @click.native=\"alterDetails()\"\n                             v-if=\"verbState && self.id == user.id\">ç¼–è¾‘ä¸ªäººèµ„æ–™</router-link>\n\n                <div v-else\n                     id=\"follow-btn\">å…³æ³¨</div>\n              </span>\n              <span v-else>\n                <router-link :to=\"'/user/'+user.id\"\n                             id=\"edit-information-btn\"\n                             @click.native=\"alterDetails()\"\n                             v-if=\"verbState && self.id == user.id\">å–æ¶ˆ</router-link>\n\n                <div v-else\n                     id=\"follow-btn\">å…³æ³¨</div>\n              </span>\n            </div>\n            <div v-else\n                 id=\"user-head-foot-nav-alterImg\"\n                 key=\"img\">\n              <input class=\"user-head-foot-nav-alterImg_btn\"\n                     type=\"range\"\n                     id=\"range\"\n                     @input=\"onSliderChange\"\n                     :min=\"sliderMin\"\n                     :max=\"sliderMax\"\n                     step=\".001\"\n                     v-model=\"sliderVal\">\n              <el-button @click=\"croppa.chooseFile()\"\n                         class=\"user-head-foot-nav-alterImg_btn\"\n                         round\n                         plain>é€‰æ‹©èƒŒæ™¯</el-button>\n              <el-button type=\"primary\"\n                         class=\"user-head-foot-nav-alterImg_btn\"\n                         round\n                         @click=\"upload\"\n                         plain>ä¿å­˜</el-button>\n              <el-button type=\"info\"\n                         class=\"user-head-foot-nav-alterImg_btn\"\n                         @click=\"alterImg()\"\n                         round>å–æ¶ˆ</el-button>\n              <el-button type=\"danger\"\n                         class=\"user-head-foot-nav-alterImg_btn\"\n                         @click=\"removeBackgroundImg()\"\n                         icon=\"el-icon-delete\"\n                         circle></el-button>\n            </div>\n          </transition>\n        </div>\n      </div>\n    </div>\n    <transition mode=\"out-in\"\n                name=\"slide-fade\">\n      <router-view></router-view>\n    </transition>\n\n    <!-- æ›´æ”¹å¤´åƒstart -->\n    <el-dialog title=\"æ›´æ”¹å¤´åƒ\"\n               :visible.sync=\"centerDialogVisible\"\n               width=\"40%\"\n               center>\n      <center>\n        <croppa class=\"user-backgroundImg changeAvatar\"\n                v-model=\"croppa\"\n                :width=208\n                :height=208\n                placeholder=\"Avatar ğŸ˜\"\n                placeholder-color=\"white\"\n                :placeholder-font-size=\"30\"\n                :disabled=\"false\"\n                accept=\"image/png,image/jpeg,image/jpg,image/gif\"\n                :prevent-white-space=\"true\"\n                :disable-scroll-to-zoom=\"true\"\n                disable-click-to-choose\n                :show-remove-button=\"false\"\n                @new-image-drawn=\"onNewImage\"\n                @init=\"onInit\"\n                @zoom=\"onZoom\">\n          <img crossOrigin=\"anonymous\"\n               :width=width\n               :src=\"user.avatar ? root+user.avatar : ''\"\n               slot=\"initial\">\n        </croppa>\n        <div id=\"changeAvatarBtn\">\n          <el-button @click=\"croppa.chooseFile()\"\n                     class=\"user-head-foot-nav-alterImg_btn\"\n                     round\n                     plain>é€‰æ‹©å›¾ç‰‡</el-button>\n          <input class=\"user-head-foot-nav-alterImg_btn\"\n                 type=\"range\"\n                 id=\"range\"\n                 @input=\"onSliderChange\"\n                 :min=\"sliderMin\"\n                 :max=\"sliderMax\"\n                 step=\".001\"\n                 v-model=\"sliderVal\">\n          <el-button type=\"primary\"\n                     class=\"user-head-foot-nav-alterImg_btn\"\n                     round\n                     @click=\"uploadAvatar\"\n                     plain>ä¿å­˜</el-button>\n          <el-button type=\"info\"\n                     class=\"user-head-foot-nav-alterImg_btn\"\n                     @click=\"centerDialogVisible = false, noEditAvatar()\"\n                     round>å–æ¶ˆ</el-button>\n          <el-button type=\"danger\"\n                     class=\"user-head-foot-nav-alterImg_btn\"\n                     @click=\"removeAvatarImg()\"\n                     icon=\"el-icon-delete\"\n                     circle></el-button>\n        </div>\n      </center>\n    </el-dialog>\n    <!-- æ›´æ”¹å¤´åƒend -->\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapMutations } from 'vuex'\nexport default {\n  data () {\n    return {\n      state: false,//åˆ¤æ–­æ˜¯ä¸æ˜¯æœ¬äºº\n      user: {},//ç”¨æˆ·åŸºæœ¬ä¿¡æ¯\n      detail: {},//ç”¨æˆ·è¯¦æƒ…\n      loading: true,\n      width: '',\n      height: 230,\n      //åˆå§‹åŒ–èƒŒæ™¯å›¾æ’ä»¶\n      croppa: {},\n      //åˆå§‹åŒ–å›¾ç‰‡æ»‘åŠ¨æ”¾å¤§ç¼©å°input range\n      sliderVal: 0,\n      sliderMin: 0,\n      sliderMax: 0,\n      root: '',//ç½‘ç«™apiæ ¹ç›®å½•\n      alterImgFlag: true,//æ˜¯å¦å‡ºç°å¤„ç†èƒŒæ™¯å›¾ç‰‡æŒ‰é’®\n      freshFlag: false,//åˆ¤æ–­æ˜¯å¦ä¸Šä¼ è¿‡å›¾ç‰‡\n      alterDetail: true,//è·³è½¬åˆ°ç¼–è¾‘ä¸ªäººèµ„æ–™å¼€å…³\n      cursorFlag: false,//æ§åˆ¶é¼ æ ‡åœ¨èƒŒæ™¯å›¾ä¸Šçš„æ ·å¼\n      centerDialogVisible: false,//ä¿®æ”¹å¤´åƒçš„å¯¹è¯æ¡†æ§åˆ¶\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'verbState',//ç™»å½•çŠ¶æ€\n      'token',//ç™»å½•çš„ç”¨æˆ·çš„token\n      'self',//è·å–å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯\n    ]),\n  },\n  //ç›‘å¬è·¯ç”±å˜åŒ–\n  watch: {\n    $route () {\n      //è·å–ç½‘é¡µurlåˆ¤æ–­æ˜¯å¦åœ¨æ›´æ”¹è¯¦æƒ…é¡µé¢\n      if (this.$route.path.endsWith('alterDetail')) this.alterDetail = false;\n    }\n  },\n  created: function () {\n\n    //è·å–æµè§ˆå™¨çª—å£çš„å®½åº¦ ç„¶åèµ‹å€¼ç»™èƒŒæ™¯å›¾ç‰‡å®½åº¦\n    this.width = window.screen.width;\n    //åˆ¤æ–­æ˜¯å¦ç™»å½•\n    this.state = localStorage.getItem('verbState');\n    //è·å–è·¯ç”±ä¼ é€’è¿‡æ¥çš„ç”¨æˆ·id\n    this.id = this.$route.params.id;\n\n    //æ•°æ®\n    let paramsObj = {\n      id: this.id,\n    }\n    //å‘é€axios è·å–ä¼ é€’è¿‡æ¥idå¯¹ç”¨çš„ç”¨æˆ·çš„æ•°æ®\n    this.$server.getInformation(paramsObj).then(data => {\n      //è·å–åˆ°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯\n      this.user = data;\n      console.log(this.user);\n      //è·å–åˆ°ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯\n      this.detail = data.user_detail;\n      //åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰èƒŒæ™¯å›¾ç‰‡ ä¸”æ˜¯å¦æ˜¯æœ¬äººé¡µé¢ ç„¶åæ›´æ”¹é«˜åº¦\n      //ä¹‹æ‰€ä»¥ä½¿ç”¨å®šæ—¶å™¨ æ˜¯å› ä¸ºæˆ‘åˆ«æ— ä»–æ³• åªèƒ½ç”¨å®šæ—¶å™¨å»¶è¿Ÿç„¶åè·å–æ•°æ®\n      setTimeout(() => {\n        if (this.user.backgroundImg != '' || this.user.id == this.self.id || this.user.backgroundImg != null) {\n          this.height = 430;\n        }\n      }, 200);\n\n    }).catch(err => {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    })\n  },\n  mounted: function () {\n    //ç½‘é¡µåŠ è½½çŠ¶æ€\n    this.loading = false;\n    //apiåœ°å€\n    this.root = this.$URL;\n    //è·å–ç½‘é¡µurlåˆ¤æ–­æ˜¯å¦åœ¨æ›´æ”¹è¯¦æƒ…é¡µé¢\n    if (this.$route.path.endsWith('alterDetail')) this.alterDetail = false;\n  },\n  methods: {\n    ...mapMutations({\n      setuser: 'SET_USER',\n    }),\n    onFileTypeMismatch () {\n      this.$message({\n        message: 'æ–‡ä»¶æ ¼å¼ä¸å¯¹å‘¦ ğŸ˜³',\n        type: 'warning',\n      })\n    },\n    onNewImage () {\n      this.sliderVal = this.croppa.scaleRatio\n      this.sliderMin = this.croppa.scaleRatio / 2\n      this.sliderMax = this.croppa.scaleRatio * 5\n    },\n\n    onSliderChange (evt) {\n      var increment = evt.target.value\n      this.croppa.scaleRatio = +increment\n    },\n\n    onZoom () {\n      // To prevent zooming out of range when using scrolling to zoom\n      // if (this.sliderMax && this.croppa.scaleRatio >= this.sliderMax) {\n      //   this.croppa.scaleRatio = this.sliderMax\n      // } else if (this.sliderMin && this.croppa.scaleRatio <= this.sliderMin) {\n      //   this.croppa.scaleRatio = this.sliderMin\n      // }\n\n      this.sliderVal = this.croppa.scaleRatio\n    },\n    upload () {\n\n      //åˆ¤æ–­æ˜¯å¦æœ‰å›¾ç‰‡é€‰ä¸­\n      if (!this.croppa.hasImage()) {\n        this.$message({\n          message: 'ä½ è¿˜æ²¡æœ‰é€‰æ‹©å›¾ç‰‡ ğŸ˜³',\n          type: 'warning'\n        });\n\n        return false;\n      }\n\n      //è·å–åˆ°æ–‡ä»¶ ä½†æ˜¯æ˜¯blob äºŒè¿›åˆ¶èµ„æº\n      this.croppa.generateBlob((blob) => {\n        //äºŒè¿›åˆ¶è½¬æ–‡ä»¶\n        const file = new File([blob], 'backImg', {\n          type: 'image/jpeg',\n        });\n        var fd = new FormData()\n        fd.append('image', file);\n        fd.append('type', 'backgroundImg');\n\n        //å‘é€axiosæ›´æ”¹å›¾ç‰‡\n        this.$server.uploadImg(fd).then(data => {\n          //æ›´æ”¹é»˜è®¤å›¾ç‰‡è·¯å¾„\n          this.detail.backgroundImg = data;\n          //æ›´æ”¹æŒ‰é’®çŠ¶æ€\n          this.alterImgFlag = !this.alterImgFlag;\n          //ä¸Šä¼ æˆåŠŸæç¤º\n          this.$message({\n            type: 'success',\n            message: 'ä¸Šä¼ æˆåŠŸ ğŸ˜Š'\n          });\n        }).catch(err => {\n          // eslint-disable-next-line no-console\n          console.log('err', err);\n        })\n\n\n        return false;\n      })\n    },\n    alterImg () {\n      this.alterImgFlag = !this.alterImgFlag;\n      this.cursorFlag = !this.cursorFlag;\n      this.croppa.refresh()\n    },\n    removeBackgroundImg () {\n      this.$confirm('ç§»é™¤èƒŒæ™¯, æ˜¯å¦ç»§ç»­?', 'æç¤º', {\n        confirmButtonText: 'ç¡®å®š',\n        cancelButtonText: 'å–æ¶ˆ',\n        type: 'warning'\n      }).then(() => {\n\n        //å‚æ•°\n        let paramsObj = {\n          type: 'backgroundImg',\n        }\n        //å‘é€axios åˆ é™¤å›¾ç‰‡\n        this.$server.deleteImg(paramsObj).then(data => {\n          if (data == 2) {\n            this.$message({\n              type: 'warning',\n              message: 'è¿˜æ²¡æœ‰èƒŒæ™¯å›¾ ğŸ˜“'\n            });\n            return false;\n          }\n          //æ›´æ”¹é»˜è®¤å›¾ç‰‡è·¯å¾„\n          this.detail.backgroundImg = '';\n          //è§¦å‘æ’ä»¶ç§»é™¤\n          this.croppa.remove();\n          //æˆåŠŸæç¤º\n          this.$message({\n            type: 'success',\n            message: 'ç§»é™¤æˆåŠŸ!'\n          });\n          //æ›´æ”¹æŒ‰é’®çŠ¶æ€\n          this.alterImgFlag = !this.alterImgFlag;\n\n        }).catch(err => {\n          // eslint-disable-next-line no-console\n          console.log(err)\n        })\n\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: 'å·²å–æ¶ˆ'\n        });\n      });\n    },\n    alterDetails () {\n      this.alterDetail = !this.alterDetail;\n    },\n    //æ›´æ”¹å¤´åƒçš„croppa æ›´æ”¹ä¸ºåœ†åœˆ\n    onInit () {\n      this.croppa.addClipPlugin(function (ctx, x, y, w, h) {\n        /*\n         * ctx: canvas context\n         * x: start point (top-left corner) x coordination\n         * y: start point (top-left corner) y coordination\n         * w: croppa width\n         * h: croppa height\n        */\n\n        ctx.beginPath()\n        ctx.arc(x + w / 2, y + h / 2, w / 2, 0, 2 * Math.PI, true)\n        ctx.closePath()\n      })\n    },\n    //ä¸Šä¼ å¤´åƒçš„æ–¹æ³•\n    uploadAvatar () {\n\n      //åˆ¤æ–­æ˜¯å¦æœ‰å›¾ç‰‡é€‰ä¸­\n      if (!this.croppa.hasImage()) {\n        this.$message({\n          message: 'ä½ è¿˜æ²¡æœ‰é€‰æ‹©å›¾ç‰‡ ğŸ˜³',\n          type: 'warning'\n        });\n\n        return false;\n      }\n\n      //è·å–åˆ°æ–‡ä»¶ ä½†æ˜¯æ˜¯blob äºŒè¿›åˆ¶èµ„æº\n      this.croppa.generateBlob((blob) => {\n        //äºŒè¿›åˆ¶è½¬æ–‡ä»¶\n        const file = new File([blob], 'backImg', {\n          type: 'image/jpeg',\n        });\n        var fd = new FormData()\n        fd.append('image', file);\n        fd.append('type', 'avatar');\n\n        //å‘é€axiosæ›´æ”¹å›¾ç‰‡\n        this.$server.uploadImg(fd).then(data => {\n\n          if (data == 2) {\n            //ä¸Šä¼ å¤±è´¥æç¤º\n            this.$message({\n              type: 'success',\n              message: 'ä¸Šä¼ å¤±è´¥ ğŸ˜“'\n            });\n            return false;\n          }\n          //ä¸Šä¼ æˆåŠŸæç¤º\n          this.$message({\n            type: 'success',\n            message: 'ä¸Šä¼ æˆåŠŸ ğŸ˜Š'\n          });\n\n          //æ›´æ”¹é»˜è®¤å›¾ç‰‡è·¯å¾„\n          this.user.avatar = data;\n          this.setuser(this.user);\n          this.centerDialogVisible = false;//ä¿®æ”¹å¤´åƒçš„å¯¹è¯æ¡†æ§åˆ¶\n        }).catch(err => {\n          // eslint-disable-next-line no-console\n          console.log('err', err);\n        })\n        return false;\n      })\n    },\n    //ç‚¹å‡»å–æ¶ˆä¿®æ”¹å¤´åƒæŒ‰é’®\n    noEditAvatar () {\n      this.croppa.refresh();\n    },\n    //ç§»é™¤å¤´åƒ\n    removeAvatarImg () {\n      this.$confirm('ç§»é™¤èƒŒæ™¯å¤´åƒ, æ˜¯å¦ç»§ç»­?', 'æç¤º', {\n        confirmButtonText: 'ç¡®å®š',\n        cancelButtonText: 'å–æ¶ˆ',\n        type: 'warning'\n      }).then(() => {\n\n        //å‚æ•°\n        let paramsObj = {\n          type: 'avatar',\n        }\n        //å‘é€axios åˆ é™¤å›¾ç‰‡\n        this.$server.deleteImg(paramsObj).then(data => {\n          if (data == 2) {\n            this.$message({\n              type: 'warning',\n              message: 'è¿˜æ²¡æœ‰å¤´åƒ ğŸ˜“'\n            });\n            return false;\n          }\n          //æ›´æ”¹é»˜è®¤å›¾ç‰‡è·¯å¾„\n          this.user.avatar = '';\n          //è§¦å‘æ’ä»¶ç§»é™¤\n          this.croppa.remove();\n          //æˆåŠŸæç¤º\n          this.$message({\n            type: 'success',\n            message: 'ç§»é™¤æˆåŠŸ!'\n          });\n          this.user.avatar = '';\n          this.setuser(this.user);\n\n\n        }).catch(err => {\n          // eslint-disable-next-line no-console\n          console.log(err)\n        })\n\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: 'å·²å–æ¶ˆ'\n        });\n      });\n    }\n  }\n}\n</script>"],"sourceRoot":"src/components/User"}]}