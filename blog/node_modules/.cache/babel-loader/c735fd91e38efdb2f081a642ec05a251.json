{"remainingRequest":"/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js!/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/blog/blog/src/components/User/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/local/var/www/blog/blog/src/components/User/index.vue","mtime":1545035221650},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/usr/local/var/www/blog/blog/node_modules/@babel/runtime/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      state: null,\n      user: {},\n      detail: {},\n      loading: true,\n      width: 1600,\n      height: 230,\n      //åˆå§‹åŒ–èƒŒæ™¯å›¾æ’ä»¶\n      croppa: {},\n      //åˆå§‹åŒ–å›¾ç‰‡æ»‘åŠ¨æ”¾å¤§ç¼©å°inputrang\n      sliderVal: 0,\n      sliderMin: 0,\n      sliderMax: 0,\n      backimg: '',\n      root: ''\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['verbState', //ç™»å½•çŠ¶æ€\n  'token', //ç™»å½•çš„ç”¨æˆ·çš„token\n  'self'])),\n  created: function created() {\n    var _this = this;\n\n    //è·å–æµè§ˆå™¨çª—å£çš„å®½åº¦ ç„¶åèµ‹å€¼ç»™èƒŒæ™¯å›¾ç‰‡å®½åº¦\n    this.width = window.screen.width; //åˆ¤æ–­æ˜¯å¦ç™»å½•\n\n    this.state = localStorage.getItem('verbState'); //è·å–è·¯ç”±ä¼ é€’è¿‡æ¥çš„ç”¨æˆ·id\n\n    this.id = this.$route.params.id; //æ•°æ®\n\n    var paramsObj = {\n      id: this.id //å‘é€axios è·å–ä¼ é€’è¿‡æ¥idå¯¹ç”¨çš„ç”¨æˆ·çš„æ•°æ®\n\n    };\n    this.$server.getInformation(paramsObj).then(function (data) {\n      //è·å–åˆ°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯\n      _this.user = data; //è·å–åˆ°ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯\n\n      _this.detail = data.user_detail; //åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰èƒŒæ™¯å›¾ç‰‡ ä¸”æ˜¯å¦æ˜¯æœ¬äººé¡µé¢ ç„¶åæ›´æ”¹é«˜åº¦\n      //ä¹‹æ‰€ä»¥ä½¿ç”¨å®šæ—¶å™¨ æ˜¯å› ä¸ºæˆ‘åˆ«æ— ä»–æ³• åªèƒ½ç”¨å®šæ—¶å™¨å»¶è¿Ÿç„¶åè·å–æ•°æ®\n\n      setTimeout(function () {\n        if (_this.user.backgroundImg != null || _this.user.id == _this.self.id) {\n          _this.height = 430;\n        }\n      }, 200); // eslint-disable-next-line no-console\n\n      console.log(data);\n    }).catch(function (err) {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    });\n  },\n  mounted: function mounted() {\n    this.loading = false;\n    this.root = this.$URL;\n  },\n  methods: {\n    onNewImage: function onNewImage() {\n      this.sliderVal = this.croppa.scaleRatio;\n      this.sliderMin = this.croppa.scaleRatio / 2;\n      this.sliderMax = this.croppa.scaleRatio * 5;\n    },\n    onSliderChange: function onSliderChange(evt) {\n      var increment = evt.target.value;\n      this.croppa.scaleRatio = +increment;\n    },\n    onZoom: function onZoom() {\n      // To prevent zooming out of range when using scrolling to zoom\n      // if (this.sliderMax && this.croppa.scaleRatio >= this.sliderMax) {\n      //   this.croppa.scaleRatio = this.sliderMax\n      // } else if (this.sliderMin && this.croppa.scaleRatio <= this.sliderMin) {\n      //   this.croppa.scaleRatio = this.sliderMin\n      // }\n      this.sliderVal = this.croppa.scaleRatio;\n    },\n    upload: function upload() {\n      var _this2 = this;\n\n      //åˆ¤æ–­æ˜¯å¦æœ‰å›¾ç‰‡é€‰ä¸­\n      if (!this.croppa.hasImage()) {\n        this.$message({\n          message: 'ä½ è¿˜æ²¡æœ‰é€‰æ‹©å›¾ç‰‡ ğŸ˜³',\n          type: 'warning'\n        });\n        return false;\n      } //è·å–åˆ°æ–‡ä»¶ ä½†æ˜¯æ˜¯blob äºŒè¿›åˆ¶èµ„æº\n\n\n      this.croppa.generateBlob(function (blob) {\n        //äºŒè¿›åˆ¶è½¬æ–‡ä»¶\n        var file = new File([blob], 'backImg', {\n          type: blob.type\n        });\n        var fd = new FormData();\n        fd.append('file', file);\n        fd.append('type', 'backgroundImg');\n        var paramsObj = {\n          image: fd,\n          type: 'backgroundImg'\n        };\n        console.log(paramsObj);\n\n        _this2.$server.uploadImg(paramsObj).then(function (data) {\n          console.log(data);\n        }).catch(function (err) {\n          console.log('err', err);\n        });\n\n        return false;\n      });\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<style scpoed lang=\"scss\">\n@import \"../../assets/css/user.scss\";\n</style>\n\n<template>\n  <div id=\"user\"\n       v-loading=\"loading\">\n    <div id=\"user-head\">\n\n      <croppa class=\"user-backgroundImg\"\n              v-model=\"croppa\"\n              :width=width\n              :height=height\n              placeholder=\"é€‰æ‹©èƒŒæ™¯å›¾ç‰‡\"\n              :placeholder-font-size=\"30\"\n              :disabled=\"false\"\n              :prevent-white-space=\"true\"\n              :disable-scroll-to-zoom=\"true\"\n              disable-click-to-choose\n              :show-remove-button=\"false\"\n              @new-image-drawn=\"onNewImage\"\n              @zoom=\"onZoom\"\n              remove-button-color=\"#1DA1F2\">\n        <img :src='root+    backimg'\n             slot=\"initial\">\n      </croppa>\n\n      <div id=\"user-head-foot\">\n\n        <div id=\"user-head-foot-main\">\n          <avatar class=\"\n             headPic\"\n                  :size=\"200\"\n                  :src='this.root+user.avatar'\n                  background-color=\"#1DA1F2\"\n                  :username=\"user.name || '' \"></avatar>\n\n          <div id=\"user-head-foot-nav\">\n\n            <div class=\"foot-nav-list\">\n              <i class=\"el-icon-edit-outline\"></i>\n              å†™çš„æ–‡ç« \n            </div>\n            <div class=\"foot-nav-list\">\n              <i class=\"el-icon-picture\"></i>\n              æ‹çš„ç…§ç‰‡\n            </div>\n            <div class=\"foot-nav-list\">\n              <i class=\"el-icon-picture\"></i>\n              å…³æ³¨äº†\n            </div>\n            <div class=\"foot-nav-list\">\n              <i class=\"el-icon-picture\"></i>\n              å…³æ³¨è€…\n            </div>\n            <input type=\"range\"\n                   @input=\"onSliderChange\"\n                   :min=\"sliderMin\"\n                   :max=\"sliderMax\"\n                   step=\".001\"\n                   v-model=\"sliderVal\">\n            <button @click=\"croppa.chooseFile()\">CHOOSE FILE...</button>\n            <button @click=\"upload\">UPLOAD</button>\n            <router-link to=\"/alterDetail\"\n                         id=\"edit-information-btn\"\n                         v-if=\"verbState && self.id == user.id\">ç¼–è¾‘ä¸ªäººèµ„æ–™</router-link>\n\n            <div v-else\n                 id=\"follow-btn\">å…³æ³¨</div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div id=\"main-user\">\n      <div id=\"main-user-left\">\n\n        <div id=\"user-name\">\n          {{user.name}}\n        </div>\n\n        <div class=\"user-web\"\n             v-if=\"detail.web\">\n          ä¸ªæ€§ç«™ç‚¹ï¼š <a :href=\"detail.web\">{{detail.web}}</a>\n        </div>\n\n        <div class=\"user-detail\"\n             v-if=\"user.introduction\"> ä¸€å¥è¯ï¼š{{user.introduction}} </div>\n        <div class=\"\"\n             v-else>\n          ä¸€å¥è¯ï¼šè¿™ä¸ªäººå¾ˆæ‡’ï½è¿˜ä»€ä¹ˆéƒ½æ²¡æœ‰ç•™ä¸‹ï½\n        </div>\n\n        <div class=\"user-detail\"\n             v-if=\"detail.occupation\">\n          èŒä¸šç»å†: <span class=\"udr-line\">{{detail.occupation}}</span> </div>\n        <div class=\"user-detail\"\n             v-if=\"detail.education\">\n          æ•™è‚²ç»å†: <span class=\"udr-line\">{{detail.education}}</span>\n        </div>\n        <div class=\"user-detail\"\n             v-if=\"detail.hobby\">\n          çˆ±å¥½: <span class=\"udr-line\">{{detail.hobby}}</span>\n        </div>\n      </div>\n\n      <div id=\"main-user-right\">\n\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nexport default {\n  data () {\n    return {\n      state: null,\n      user: {},\n      detail: {},\n      loading: true,\n      width: 1600,\n      height: 230,\n      //åˆå§‹åŒ–èƒŒæ™¯å›¾æ’ä»¶\n      croppa: {},\n      //åˆå§‹åŒ–å›¾ç‰‡æ»‘åŠ¨æ”¾å¤§ç¼©å°inputrang\n      sliderVal: 0,\n      sliderMin: 0,\n      sliderMax: 0,\n      backimg: '',\n      root: '',\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'verbState',//ç™»å½•çŠ¶æ€\n      'token',//ç™»å½•çš„ç”¨æˆ·çš„token\n      'self',//è·å–å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯\n    ]),\n\n  },\n  created: function () {\n\n    //è·å–æµè§ˆå™¨çª—å£çš„å®½åº¦ ç„¶åèµ‹å€¼ç»™èƒŒæ™¯å›¾ç‰‡å®½åº¦\n    this.width = window.screen.width;\n    //åˆ¤æ–­æ˜¯å¦ç™»å½•\n    this.state = localStorage.getItem('verbState');\n    //è·å–è·¯ç”±ä¼ é€’è¿‡æ¥çš„ç”¨æˆ·id\n    this.id = this.$route.params.id;\n\n    //æ•°æ®\n    let paramsObj = {\n      id: this.id,\n    }\n    //å‘é€axios è·å–ä¼ é€’è¿‡æ¥idå¯¹ç”¨çš„ç”¨æˆ·çš„æ•°æ®\n    this.$server.getInformation(paramsObj).then(data => {\n      //è·å–åˆ°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯\n      this.user = data;\n      //è·å–åˆ°ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯\n      this.detail = data.user_detail;\n      //åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰èƒŒæ™¯å›¾ç‰‡ ä¸”æ˜¯å¦æ˜¯æœ¬äººé¡µé¢ ç„¶åæ›´æ”¹é«˜åº¦\n      //ä¹‹æ‰€ä»¥ä½¿ç”¨å®šæ—¶å™¨ æ˜¯å› ä¸ºæˆ‘åˆ«æ— ä»–æ³• åªèƒ½ç”¨å®šæ—¶å™¨å»¶è¿Ÿç„¶åè·å–æ•°æ®\n      setTimeout(() => {\n        if (this.user.backgroundImg != null || this.user.id == this.self.id) {\n          this.height = 430;\n        }\n      }, 200);\n\n      // eslint-disable-next-line no-console\n      console.log(data);\n    }).catch(err => {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    })\n  },\n  mounted: function () {\n    this.loading = false;\n    this.root = this.$URL;\n  },\n  methods: {\n\n    onNewImage () {\n      this.sliderVal = this.croppa.scaleRatio\n      this.sliderMin = this.croppa.scaleRatio / 2\n      this.sliderMax = this.croppa.scaleRatio * 5\n    },\n\n    onSliderChange (evt) {\n      var increment = evt.target.value\n      this.croppa.scaleRatio = +increment\n    },\n\n    onZoom () {\n      // To prevent zooming out of range when using scrolling to zoom\n      // if (this.sliderMax && this.croppa.scaleRatio >= this.sliderMax) {\n      //   this.croppa.scaleRatio = this.sliderMax\n      // } else if (this.sliderMin && this.croppa.scaleRatio <= this.sliderMin) {\n      //   this.croppa.scaleRatio = this.sliderMin\n      // }\n\n      this.sliderVal = this.croppa.scaleRatio\n    },\n    upload () {\n\n      //åˆ¤æ–­æ˜¯å¦æœ‰å›¾ç‰‡é€‰ä¸­\n      if (!this.croppa.hasImage()) {\n        this.$message({\n          message: 'ä½ è¿˜æ²¡æœ‰é€‰æ‹©å›¾ç‰‡ ğŸ˜³',\n          type: 'warning'\n        });\n\n        return false;\n      }\n\n      //è·å–åˆ°æ–‡ä»¶ ä½†æ˜¯æ˜¯blob äºŒè¿›åˆ¶èµ„æº\n      this.croppa.generateBlob((blob) => {\n\n        //äºŒè¿›åˆ¶è½¬æ–‡ä»¶\n        const file = new File([blob], 'backImg', {\n          type: blob.type,\n        });\n        var fd = new FormData()\n        fd.append('file', file);\n        fd.append('type', 'backgroundImg');\n        let paramsObj = {\n          image: fd,\n          type: 'backgroundImg',\n        }\n        console.log(paramsObj);\n\n        this.$server.uploadImg(paramsObj).then(data => {\n          console.log(data);\n        }).catch(err => {\n          console.log('err', err);\n        })\n\n\n        return false;\n      })\n    }\n\n  }\n}\n</script>"],"sourceRoot":"src/components/User"}]}