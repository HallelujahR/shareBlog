{"remainingRequest":"/usr/local/var/www/blog/blog/node_modules/thread-loader/dist/cjs.js!/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js!/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/blog/blog/src/components/User/detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/local/var/www/blog/blog/src/components/User/detail.vue","mtime":1547793389103},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/usr/local/var/www/blog/blog/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapActions } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      dynamicTags: ['篮球', '摄影', '看书'],\n      // 爱好标签\n      inputVisible: false,\n      inputValue: '',\n      detail: {},\n      labelPosition: 'left',\n      //form表单对齐方式\n      loading: true,\n      ruleForm: {\n        phone: '',\n        //手机号\n        name: '',\n        //昵称\n        introduction: '',\n        //一句话\n        education: '',\n        //教育\n        occupation: '',\n        //职业\n        hobby: '',\n        //爱好\n        web: '' //个人站点\n\n      },\n      rules: {\n        name: [{\n          required: true,\n          message: '请填写昵称',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 10,\n          message: '长度在 2 到 10 个字符',\n          trigger: 'blur'\n        }],\n        introduction: [{\n          required: true,\n          message: '请填写介绍',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 40,\n          message: '长度在 3 到 40 个字符',\n          trigger: 'blur'\n        }],\n        education: [{\n          required: true,\n          message: '请填写教育',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 40,\n          message: '长度在 2 到 40 个字符',\n          trigger: 'blur'\n        }],\n        occupation: [{\n          required: true,\n          message: '请填写职业',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 40,\n          message: '长度在 2 到 40 个字符',\n          trigger: 'blur'\n        }],\n        web: [{\n          pattern: /^([hH][tT]{2}[pP]:\\/\\/|[hH][tT]{2}[pP][sS]:\\/\\/)(([A-Za-z0-9-~]+)\\.)+([A-Za-z0-9-~\\\\/])+$/,\n          message: '网站格式不正确',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.loading = false;\n  },\n  computed: {},\n  created: function created() {\n    var _this = this;\n\n    //获取路由传递过来的用户id\n    this.id = this.$route.params.id; //数据\n\n    var paramsObj = {\n      id: this.id //发送axios 获取传递过来id对用的用户的数据\n\n    };\n    this.$server.getInformation(paramsObj).then(function (data) {\n      //获取到用户的基本信息\n      _this.user = data; //获取到用户的详细信息\n      //把获取到的相信信息更新到当前页面\n\n      _this.ruleForm = data.user_detail;\n      _this.ruleForm['name'] = data.name;\n      _this.ruleForm['phone'] = data.phone;\n      _this.ruleForm['introduction'] = data.introduction;\n    }).catch(function (err) {\n      // eslint-disable-next-line no-console\n      console.log(err);\n    });\n  },\n  methods: _objectSpread({}, mapActions(['setUser']), {\n    submitForm: function submitForm(formName) {\n      var _this2 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        //判断表单数据是否正确\n        if (valid) {\n          //获取表单数据\n          var paramObj = _this2.ruleForm; //发送请求更改用户信息\n\n          _this2.$server.editDetail(paramObj).then(function (data) {\n            //提示信息\n            _this2.$message({\n              type: 'success',\n              message: '修改成功 😊'\n            }); // eslint-disable-next-line no-console\n\n\n            console.log(_this2.setUser); //成功后更改用户本地信息\n\n            _this2.setUser(data);\n          }).catch(function (err) {\n            _this2.$message({\n              type: 'warning',\n              message: '修改失败 😓'\n            }); // eslint-disable-next-line no-console\n\n\n            console.log(err);\n          });\n        } else {\n          alert('error submit!!');\n          return false;\n        }\n      });\n    },\n    resetForm: function resetForm(formName) {\n      //重制表单\n      this.$refs[formName].resetFields();\n    },\n    //爱好 标签的相关操作\n    handleClose: function handleClose(tag) {\n      this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\n    },\n    //添加爱好的相关操作\n    showInput: function showInput() {\n      var _this3 = this;\n\n      this.inputVisible = true;\n      this.$nextTick(function () {\n        _this3.$refs.saveTagInput.$refs.input.focus();\n      });\n    },\n    //添加爱好的相关操作\n    handleInputConfirm: function handleInputConfirm() {\n      var inputValue = this.inputValue;\n\n      if (inputValue) {\n        this.dynamicTags.push(inputValue);\n      }\n\n      this.inputVisible = false;\n      this.inputValue = '';\n    }\n  })\n};",null]}