{"remainingRequest":"/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js!/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/blog/blog/src/components/loginOrRegister/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/local/var/www/blog/blog/src/components/loginOrRegister/login.vue","mtime":1543327679477},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/usr/local/var/www/blog/blog/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nimport { mapMutations } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      show: false,\n      ruleForm: {\n        account: '',\n        password: ''\n      },\n      rules: {\n        account: [{\n          required: true,\n          message: '请输入账号',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 20,\n          message: '长度在 3 到 20 个字符',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 20,\n          message: '长度在 3 到 20 个字符',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  computed: _objectSpread({}, mapState(['verbState'])),\n  mounted: function mounted() {\n    setTimeout(function () {\n      this.show = true;\n    }, 200);\n  },\n  methods: _objectSpread({}, mapMutations({\n    setverbState: 'SET_VERBSTATE',\n    setToken: 'SET_TOKEN'\n  }), {\n    submitForm: function submitForm(formName) {\n      var _this = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          // return fales;\n          axios.post('http://api.blog.com/authorizations', {\n            username: _this.ruleForm.account,\n            password: _this.ruleForm.password\n          }).then(function (response) {\n            console.log(response); //用户的token\n\n            var token = response.data.access_token; // const userDetail = response.data.\n            //把登录后的token 存储在vuex 中\n\n            _this.setverbState(true); // this.setToken(token);\n            //使用localStorage 存储登录信息\n\n\n            localStorage.setItem('access_token', token);\n            localStorage.setItem('verbState', 'true'); //登录成功后的提示信息\n\n            _this.$message({\n              message: '登录成功，开始您的流域',\n              type: 'success'\n            }); //登录成功跳转到首页\n            // this.$router.push({name:'index'})\n\n          }).catch(function (error) {\n            console.log(error);\n            if (error.response.data.status_code == 401) _this.$message.error(error.response.data.message);\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    register: function register() {\n      this.$emit('reg', true);\n    }\n  })\n};",{"version":3,"sources":["login.vue"],"names":[],"mappings":"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","sourcesContent":["<style type=\"scoped\" lang=\"scss\">\n@import '@/assets/css/login.scss';\n</style>\n\n<template>\n\t<div>\n\t\t<div id=\"login\">\n\t\t\t<div id=\"login-title\">\n\t\t\t\t登录流域\n\t\t\t</div>\n\n\t\t\t<el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" class=\"demo-ruleForm\">\n\t\t\t\t<div class=\"login-user\">\n\t\t\t\t\t<el-form-item prop=\"account\">\n\t\t\t\t\t\t<el-input\n\t\t\t\t\t\t    placeholder=\"输入账号\"\n\t\t\t\t\t\t    suffix-icon=\"el-icon-phone\"\n\t\t\t\t\t\t    v-model=\"ruleForm.account\"\n\t\t\t\t\t\t    id=\"login-user-input\"\n\t\t\t\t\t\t    >\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"login-user\">\n\t\t\t\t\t<el-form-item prop=\"password\">\n\t\t\t\t\t\t<el-input\n\t\t\t\t\t\t    placeholder=\"输入密码\"\n\t\t\t\t\t\t    suffix-icon=\"el-icon-edit\"\n\t\t\t\t\t\t    v-model=\"ruleForm.password\"\n\t\t\t\t\t\t    id=\"login-user-input2\"\n\t\t\t\t\t\t    type=\"password\"\n\t\t\t\t\t\t    >\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"login-user\">\n\t\t\t\t\t<el-form-item>\n\t\t\t\t    \t<el-button class=\"login-btn\" type=\"primary\" @click=\"submitForm('ruleForm')\">立即登录</el-button>\n\t\t\t\t    \t<div class=\"register\">找回密码</div>\n\t\t\t\t    \t<div class=\"register\" @click=\"register()\" style=\"margin-left:200px;\">还没有账号？立即注册</div>\n\t\t\t\t    </el-form-item>\n\t\t\t\t</div>\n\t\t\t</el-form>\n\n\t\t\t<div id=\"login-ds\">\n\t\t\t\t<span style=\"float:left\">第三方登录:</span>\n\t\t\t\t<img class=\"login-icon\" src=\"@/assets/qqicon.png\" /> \n\t\t\t\t<img class=\"login-icon\" src=\"@/assets/weibo.png\" />\n\t\t\t</div>\n\t\t\t<div v-if=\"verbState\">\n\t\t\t\t{{verbState}}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { mapMutations } from 'vuex'\n\n\texport default {\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tshow:false,\n\t\t\t\truleForm:{\n\t\t\t\t\taccount:'',\n\t\t\t\t\tpassword:'',\n\t\t\t\t},\n\t\t\t\trules:{\n\t\t\t\t\taccount: [\n\t\t\t            { required: true, message: '请输入账号', trigger: 'blur' },\n\t\t\t            { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\n          \t\t\t],\n          \t\t\tpassword: [\n          \t\t\t\t{ required: true, message: '请输入密码', trigger: 'blur' },\n\t\t\t            { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\n          \t\t\t],\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\t...mapState([\n\t\t\t\t'verbState'\n\t\t\t]),\n\n\t\t},\n\t    mounted:function(){\n\t        setTimeout(function(){ this.show = true} ,200);\n\t    },\n\t    methods:{\n            ...mapMutations({\n                setverbState: 'SET_VERBSTATE',\n                setToken: 'SET_TOKEN',\n            }),\n\n\t    \tsubmitForm(formName) {\n\n                this.$refs[formName].validate((valid) => {\n\n\n\t\t          if (valid) {\n\n\t\t          \t// return fales;\n\t\t            axios.post('http://api.blog.com/authorizations',{\n\t\t            \tusername:this.ruleForm.account,\n\t\t            \tpassword:this.ruleForm.password,\n\t\t            })\n\t\t            .then(response => {\n\t\t\t\t        console.log(response);\n\n\t\t\t\t        //用户的token\n\t\t\t\t        const token = response.data.access_token;\n\n\t\t\t\t        // const userDetail = response.data.\n\t\t\t\t        //把登录后的token 存储在vuex 中\n                        this.setverbState(true);\n                        // this.setToken(token);\n\n\t\t\t\t       \t\n\t\t\t\t       \t//使用localStorage 存储登录信息\n\t\t\t\t\t\tlocalStorage.setItem('access_token',token);\n\t\t\t\t\t\tlocalStorage.setItem('verbState','true');\n\n\t\t\t\t       \t//登录成功后的提示信息\n\t\t            \tthis.$message({\n\t\t\t\t          message: '登录成功，开始您的流域',\n\t\t\t\t          type: 'success'\n\t\t\t\t        });\n\n\t\t            \t//登录成功跳转到首页\n\t\t            \t// this.$router.push({name:'index'})\n\n\t\t            })\n\t\t            .catch(error => {\n\t\t            \tconsole.log(error);\n\t\t            \tif(error.response.data.status_code == 401) this.$message.error(error.response.data.message);\n\t\t            \t\n\t\t            });\n\t\t          } else {\n\t\t            console.log('error submit!!');\n\t\t            return false;\n\t\t          }\n\t\t        });\n\t\t      },\n\t\t    resetForm(formName) {\n\t\t        this.$refs[formName].resetFields();\n\t\t    },\n\t\t    register() {\n\t\t    \tthis.$emit('reg',true);\n\t\t    },\n\t\t    //获取用户数据\n\n\t    }\n\n\t}\n</script>"],"sourceRoot":"src/components/loginOrRegister"}]}