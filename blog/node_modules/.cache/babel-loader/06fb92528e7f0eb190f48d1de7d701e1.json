{"remainingRequest":"/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js!/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/local/var/www/blog/blog/src/components/loginOrRegister/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/local/var/www/blog/blog/src/components/loginOrRegister/login.vue","mtime":1544538630058},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/var/www/blog/blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/usr/local/var/www/blog/blog/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState, mapMutations, mapActions } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      show: false,\n      ruleForm: {\n        account: '',\n        password: ''\n      },\n      errorMsg: '',\n      rules: {\n        account: [{\n          required: true,\n          message: '请输入账号',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 20,\n          message: '长度在 3 到 20 个字符',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 20,\n          message: '长度在 3 到 20 个字符',\n          trigger: 'blur'\n        }]\n      },\n      Loading: true\n    };\n  },\n  computed: _objectSpread({}, mapState([\"verbState\"]), mapActions([\"setUser\"])),\n  created: function created() {\n    if (localStorage.verbState === 'true') this.$router.push({\n      name: 'index'\n    });\n  },\n  mounted: function mounted() {\n    setTimeout(function () {\n      this.Loading = false;\n    }.bind(this), 200);\n\n    if (localStorage.relogin === 'true') {\n      this.$message({\n        message: '登录过期，请重新登录',\n        type: 'warning'\n      });\n      localStorage.removeItem('relogin');\n    }\n  },\n  methods: _objectSpread({}, mapMutations({\n    setverbState: 'SET_VERBSTATE',\n    setToken: 'SET_TOKEN'\n  }), {\n    submitForm: function submitForm(formName) {\n      var _this = this;\n\n      this.errorMsg = '';\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          var paramObj = {\n            username: _this.ruleForm.account,\n            password: _this.ruleForm.password\n          }; // console.log(this.$server);\n\n          _this.$server.login(paramObj).then(function (data) {\n            // console.log(data);\n            //用户的token\n            var token = data.access_token; //使用localStorage 存储登录信息\n\n            localStorage.setItem('access_token', token);\n            localStorage.setItem('verbState', 'true'); //把登录后的token 存储在vuex 中\n\n            _this.setverbState(true);\n\n            _this.setToken(token); //获取用户信息\n\n\n            _this.setUser; //登录成功后的提示信息\n\n            _this.$message({\n              message: '登录成功，开始您的流域',\n              type: 'success'\n            }); //登录成功跳转到首页\n\n\n            _this.$router.push({\n              name: 'index'\n            });\n          }).catch(function (err) {\n            if (err.status === 401) {\n              _this.$message.error('用户或密码错误');\n\n              localStorage.removeItem('relogin');\n              return false;\n            }\n          });\n        } else {\n          // console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    } //获取用户数据\n\n  })\n};",{"version":3,"sources":["login.vue"],"names":[],"mappings":"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","sourcesContent":["<style scoped lang=\"scss\">\n@import \"../../assets/css/login.scss\";\n</style>\n\n<template>\n  <div id=\"login-body\"\n       v-loading=\"Loading\">\n    <div id=\"login\">\n      <div id=\"login-title\">\n        <img src=\"../../assets/riveredlogo.png\"\n             width=\"150\"\n             alt=\"\">\n      </div>\n      <el-form :model=\"ruleForm\"\n               :rules=\"rules\"\n               ref=\"ruleForm\"\n               class=\"demo-ruleForm\">\n        <div>\n          <el-form-item prop=\"account\"\n                        :error=\"errorMsg\">\n            <el-input placeholder=\"输入账号\"\n                      suffix-icon=\"el-icon-phone\"\n                      v-model=\"ruleForm.account\"\n                      class=\"login-user-input\">\n            </el-input>\n          </el-form-item>\n        </div>\n        <div>\n          <el-form-item prop=\"password\">\n            <el-input placeholder=\"输入密码\"\n                      suffix-icon=\"el-icon-edit\"\n                      v-model=\"ruleForm.password\"\n                      class=\"login-user-input\"\n                      type=\"password\">\n            </el-input>\n          </el-form-item>\n        </div>\n\n        <div id=\"login-foot\">\n          <el-button class=\"login-btn\"\n                     type=\"primary\"\n                     @click=\"submitForm('ruleForm')\">立即登录</el-button>\n          <div class=\"findPass\">\n            <span> 找回密码</span>\n          </div>\n\n        </div>\n      </el-form>\n\n      <div id=\"login-ds\">\n        <div id=\"ds-title\">\n          <span>———————— 社交账号登录 ————————</span>\n        </div>\n        <div id=\"ds-in\">\n          <img class=\"login-icon\"\n               width=\"25px;\"\n               src=\"../../assets/qq.png\" />\n          <img class=\"login-icon\"\n               width=\"25px;\"\n               src=\"../../assets/sina.png\" />\n        </div>\n      </div>\n\n      <div class=\"register\">\n        <router-link to=\"/register\">\n          还没有账号？立即注册\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapMutations, mapActions } from 'vuex'\n\nexport default {\n  data: function () {\n    return {\n      show: false,\n      ruleForm: {\n        account: '',\n        password: '',\n      },\n      errorMsg: '',\n      rules: {\n        account: [\n          { required: true, message: '请输入账号', trigger: 'blur' },\n          { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\n        ],\n      },\n      Loading: true,\n    }\n  },\n  computed: {\n    ...mapState([\n      \"verbState\"\n    ]),\n    ...mapActions([\n      \"setUser\",\n    ]),\n\n  },\n  created: function () {\n    if (localStorage.verbState === 'true') this.$router.push({ name: 'index' })\n  },\n  mounted: function () {\n    setTimeout(function () { this.Loading = false; }.bind(this), 200);\n    if (localStorage.relogin === 'true') {\n      this.$message({\n        message: '登录过期，请重新登录',\n        type: 'warning'\n      });\n      localStorage.removeItem('relogin')\n    }\n  },\n  methods: {\n    ...mapMutations({\n      setverbState: 'SET_VERBSTATE',\n      setToken: 'SET_TOKEN',\n    }),\n\n    submitForm: function (formName) {\n      this.errorMsg = '';\n      this.$refs[formName].validate((valid) => {\n\n\n        if (valid) {\n\n          let paramObj = {\n            username: this.ruleForm.account,\n            password: this.ruleForm.password,\n          };\n          // console.log(this.$server);\n          this.$server.login(paramObj).then(data => {\n            // console.log(data);\n            //用户的token\n            const token = data.access_token;\n\n            //使用localStorage 存储登录信息\n            localStorage.setItem('access_token', token);\n            localStorage.setItem('verbState', 'true');\n\n            //把登录后的token 存储在vuex 中\n            this.setverbState(true);\n            this.setToken(token);\n\n            //获取用户信息\n            this.setUser;\n\n            //登录成功后的提示信息\n            this.$message({\n              message: '登录成功，开始您的流域',\n              type: 'success'\n            });\n\n            //登录成功跳转到首页\n            this.$router.push({ name: 'index' });\n          })\n            .catch(err => {\n\n              if (err.status === 401) {\n                this.$message.error('用户或密码错误');\n                localStorage.removeItem('relogin');\n                return false;\n              }\n            })\n\n        } else {\n          // console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    resetForm: function (formName) {\n      this.$refs[formName].resetFields();\n    },\n    //获取用户数据\n\n  }\n\n}\n</script>"],"sourceRoot":"src/components/loginOrRegister"}]}