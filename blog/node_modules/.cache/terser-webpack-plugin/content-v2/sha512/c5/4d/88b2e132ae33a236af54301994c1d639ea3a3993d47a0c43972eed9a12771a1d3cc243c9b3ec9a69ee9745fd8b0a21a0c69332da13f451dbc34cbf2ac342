{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-94a8e8d0\"],{7198:function(e,r,t){},\"7f7f\":function(e,r,t){var s=t(\"86cc\").f,o=Function.prototype,i=/^\\s*function ([^ (]*)/,a=\"name\";a in o||t(\"9e1e\")&&s(o,a,{configurable:!0,get:function(){try{return(\"\"+this).match(i)[1]}catch(e){return\"\"}}})},\"87d5\":function(e,r,t){\"use strict\";t.r(r);var s=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s(\"div\",[s(\"div\",{attrs:{id:\"register\"}},[s(\"div\",{attrs:{id:\"register-title\"}},[e._v(\"\\n      加入流域\\n    \")]),s(\"el-form\",{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{model:e.ruleForm,rules:e.rules}},[s(\"div\",{staticClass:\"register-user\"},[s(\"el-form-item\",{attrs:{prop:\"account\",error:e.errorphone}},[s(\"el-input\",{attrs:{placeholder:\"输入手机号\",\"suffix-icon\":\"el-icon-phone\",id:\"register-user-input0\"},on:{input:function(r){e.oninput()}},model:{value:e.ruleForm.account,callback:function(r){e.$set(e.ruleForm,\"account\",r)},expression:\"ruleForm.account\"}},[s(\"el-button\",{attrs:{slot:\"append\",disabled:e.isdis},on:{click:function(r){e.getCap(\"ruleForm\",\"account\")}},slot:\"append\"},[e._v(\"下一步\")])],1)],1)],1),s(\"transition-group\",{attrs:{name:\"slide-fade\"}},[e.showcaptchas?s(\"div\",{key:1,staticClass:\"register-user\"},[s(\"el-form-item\",{attrs:{prop:\"yzm\",error:e.errorMsg}},[s(\"el-input\",{attrs:{placeholder:\"输入验证码\",\"suffix-icon\":\"el-icon-document\",id:\"register-user-input\"},model:{value:e.ruleForm.yzm,callback:function(r){e.$set(e.ruleForm,\"yzm\",r)},expression:\"ruleForm.yzm\"}},[s(\"el-button\",{staticStyle:{padding:\"0px\"},attrs:{slot:\"prepend\"},slot:\"prepend\"},[e.isreloadYzm?s(\"img\",{staticStyle:{\"margin-top\":\"11px\"},attrs:{width:\"120px\",src:e.captchas},on:{click:function(r){e.reloadYzm()}}}):s(\"i\",{staticClass:\"el-icon-loading\"})]),s(\"el-button\",{staticStyle:{width:\"84px\",padding:\"0px\"},attrs:{slot:\"append\",disabled:e.issendSms},on:{click:function(r){e.checkYzm(\"ruleForm\",\"yzm\",r)}},slot:\"append\"},[e._v(\"发送短信\")])],1)],1)],1):e._e(),e.showSms?s(\"div\",{key:2,staticClass:\"register-user\"},[s(\"el-form-item\",{attrs:{error:e.errorName,prop:\"name\"}},[s(\"el-input\",{attrs:{placeholder:\"输入昵称\",\"suffix-icon\":\"el-icon-tickets\",id:\"register-user-input3\"},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,\"name\",r)},expression:\"ruleForm.name\"}})],1),s(\"el-form-item\",{attrs:{prop:\"password\"}},[s(\"el-input\",{attrs:{placeholder:\"请输入密码\",\"suffix-icon\":\"el-icon-edit-outline\",id:\"register-user-input4\",type:\"password\"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,\"password\",r)},expression:\"ruleForm.password\"}})],1),s(\"el-form-item\",{attrs:{prop:\"sms\",error:e.errorSms}},[s(\"el-input\",{attrs:{placeholder:\"输入短信验证码\",\"suffix-icon\":\"el-icon-message\",id:\"register-user-input5\"},model:{value:e.ruleForm.sms,callback:function(r){e.$set(e.ruleForm,\"sms\",r)},expression:\"ruleForm.sms\"}},[s(\"el-button\",{attrs:{slot:\"append\"},on:{click:function(r){e.regNow(\"ruleForm\",\"name\",\"password\",\"sms\")}},slot:\"append\"},[e.isZc?s(\"span\",[e._v(\"注册\")]):s(\"i\",{staticClass:\"el-icon-loading\"})])],1)],1)],1):e._e()])],1),s(\"div\",{attrs:{id:\"register-ds\"}},[s(\"span\",{staticStyle:{float:\"left\"}},[e._v(\"第三方登录:\")]),s(\"img\",{staticClass:\"register-icon\",attrs:{src:t(!function(){var e=new Error(\"Cannot find module '../../assets/qqicon.png'\");throw e.code=\"MODULE_NOT_FOUND\",e}())}}),s(\"img\",{staticClass:\"register-icon\",attrs:{src:t(!function(){var e=new Error(\"Cannot find module '../../assets/weibo.png'\");throw e.code=\"MODULE_NOT_FOUND\",e}())}}),s(\"div\",{staticClass:\"register\",staticStyle:{\"margin-left\":\"200px\"},on:{click:function(r){e.register()}}},[e._v(\"已有账号？立即账号\")])])],1)])},o=[],i=(t(\"7f7f\"),t(\"be94\")),a=(t(\"cadf\"),t(\"551c\"),t(\"097d\"),t(\"2f62\")),n={data:function(){return{show:!1,ruleForm:{account:\"\",password:\"\",name:\"\",yzm:\"\",sms:\"\"},captchas:\"\",captcha_key:\"\",showcaptchas:!1,showSms:!1,smskey:\"\",isdis:!1,issendSms:!1,errorMsg:\"\",errorphone:\"\",errorSms:\"\",errorName:\"\",isreloadYzm:!0,isZc:!0,rules:{account:[{required:!0,message:\"请输入账号\",trigger:\"blur\"},{min:3,max:20,message:\"长度在 3 到 20 个字符\",trigger:\"blur\"},{pattern:/^1[34578]\\d{9}$/,message:\"手机号格式不正确\",trigger:\"blur\"}],yzm:[{required:!0,message:\"请输入验证码\",trigger:\"blur\"}],sms:[{required:!0,message:\"请输入短信验证码\",trigger:\"blur\"}],name:[{required:!0,message:\"请输入昵称\",trigger:\"blur\"},{min:2,max:10,message:\"长度在 2 到 10 个字符\",trigger:\"blur\"}],password:[{required:!0,message:\"请输入密码\",trigger:\"blur\"},{min:6,max:20,message:\"长度在 6 到 20 个字符\",trigger:\"blur\"}]}}},mounted:function(){setTimeout(function(){this.show=!0},200)},computed:Object(i[\"a\"])({},Object(a[\"b\"])([\"setUser\"])),methods:Object(i[\"a\"])({},Object(a[\"d\"])({setverbState:\"SET_VERBSTATE\",setToken:\"SET_TOKEN\"}),{register:function(){this.$emit(\"log\",!0)},getCap:function(e,r){var t=this;this.errorphone=\"\",this.$refs[e].validateField(r,function(e){if(\"\"===e){var r={phone:t.ruleForm.account};t.$server.getCaptchas(r).then(function(e){t.captchas=e.captcha_image_content,t.captcha_key=e.captcha_key,t.showcaptchas=!0,t.isdis=!0,t.isreloadYzm=!0}).catch(function(e){return 422===e.status?(t.errorphone=\"电话号已存在\",!1):429===e.status?(t.errorphone=\"操作次数错过，请稍后再试\",t.showcaptchas=!1,!1):void 0})}})},oninput:function(){this.isdis=!1,this.showcaptchas=!1,this.ruleForm.yzm=\"\"},reloadYzm:function(){var e=this;this.isreloadYzm=!1,setTimeout(function(){e.getCap(\"ruleForm\",\"account\")},500)},checkYzm:function(e,r,t){var s=this;this.errorMsg=\"\",this.$refs[e].validateField(r,function(e){if(\"\"===e){var r={captcha_key:s.captcha_key,captcha_code:s.ruleForm.yzm};s.$server.checkYzm(r).then(function(e){var r=60,o=setInterval(function(){t.target.innerHTML=r,r--,0===r&&(clearInterval(o),s.issendSms=!1,t.target.innerHTML=\"发送短信\")},1e3);s.issendSms=!0,s.smskey=e.key,s.showSms=!0}).catch(function(e){return 401===e.status?(s.getCap(\"ruleForm\",\"yzm\"),s.errorMsg=\"验证码错误\",!1):429===e.status?(s.errorMsg=\"操作次数过多，请稍后再试\",s.isdis=!1,s.showcaptchas=!1,s.ruleForm.yzm=\"\",!1):422===e.status?(s.errorMsg=\"图片验证码已失效,点就图片重新获取\",!1):void 0})}})},regNow:function(e,r,t,s){var o=this,i=\"\",a=\"\";this.isZc=!1,this.$refs[e].validateField(r,function(e){i=e}),this.$refs[e].validateField(t,function(e){a=e}),\"\"===a&&\"\"===i&&this.$refs[e].validateField(s,function(e){if(\"\"===e){var r={verification_key:o.smskey,password:o.ruleForm.password,name:o.ruleForm.name,phone:o.ruleForm.account,verification_code:o.ruleForm.sms};o.$server.regNow(r).then(function(e){var r=e.meta.access_token;o.setverbState(!0),o.setToken(r),localStorage.setItem(\"access_token\",r),localStorage.setItem(\"verbState\",\"true\"),o.setUser,o.$message({message:\"注册成功，开始您的流域\",type:\"success\"}),o.isZc=!0,o.$router.push({name:\"index\"})}).catch(function(e){return console.log(e),422===e.status?(o.errorName=\"昵称已存在\",o.isZc=!0,!1):401===e.status?(o.errorSms=\"验证码错误\",o.isZc=!0,!1):423===e.status?(o.errorSms=\"验证码失效，请重新发送\",o.getCap(\"ruleForm\",\"account\"),o.isZc=!0,!1):void 0})}})}})},c=n,u=(t(\"e185\"),t(\"2877\")),l=Object(u[\"a\"])(c,s,o,!1,null,null,null);l.options.__file=\"register.vue\";r[\"default\"]=l.exports},e185:function(e,r,t){\"use strict\";var s=t(\"7198\"),o=t.n(s);o.a}}]);","extractedComments":[]}