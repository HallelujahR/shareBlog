{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-c5a8054a\"],{\"3f62\":function(e,t,r){e.exports=r.p+\"img/qqicon.d52aff20.png\"},7198:function(e,t,r){},\"794d\":function(e,t,r){e.exports=r.p+\"img/weibo.f801195e.png\"},\"7f7f\":function(e,t,r){var s=r(\"86cc\").f,i=Function.prototype,o=/^\\s*function ([^ (]*)/,a=\"name\";a in i||r(\"9e1e\")&&s(i,a,{configurable:!0,get:function(){try{return(\"\"+this).match(o)[1]}catch(e){return\"\"}}})},\"87d5\":function(e,t,r){\"use strict\";r.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",[s(\"div\",{attrs:{id:\"register\"}},[s(\"div\",{attrs:{id:\"register-title\"}},[e._v(\"\\n      加入流域\\n    \")]),s(\"el-form\",{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{model:e.ruleForm,rules:e.rules}},[s(\"div\",{staticClass:\"register-user\"},[s(\"el-form-item\",{attrs:{prop:\"account\",error:e.errorphone}},[s(\"el-input\",{attrs:{placeholder:\"输入手机号\",\"suffix-icon\":\"el-icon-phone\",id:\"register-user-input0\"},on:{input:function(t){e.oninput()}},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,\"account\",t)},expression:\"ruleForm.account\"}},[s(\"el-button\",{attrs:{slot:\"append\",disabled:e.isdis},on:{click:function(t){e.getCap(\"ruleForm\",\"account\")}},slot:\"append\"},[e._v(\"下一步\")])],1)],1)],1),s(\"transition-group\",{attrs:{name:\"slide-fade\"}},[e.showcaptchas?s(\"div\",{key:1,staticClass:\"register-user\"},[s(\"el-form-item\",{attrs:{prop:\"yzm\",error:e.errorMsg}},[s(\"el-input\",{attrs:{placeholder:\"输入验证码\",\"suffix-icon\":\"el-icon-document\",id:\"register-user-input\"},model:{value:e.ruleForm.yzm,callback:function(t){e.$set(e.ruleForm,\"yzm\",t)},expression:\"ruleForm.yzm\"}},[s(\"el-button\",{staticStyle:{padding:\"0px\"},attrs:{slot:\"prepend\"},slot:\"prepend\"},[e.isreloadYzm?s(\"img\",{staticStyle:{\"margin-top\":\"11px\"},attrs:{width:\"120px\",src:e.captchas},on:{click:function(t){e.reloadYzm()}}}):s(\"i\",{staticClass:\"el-icon-loading\"})]),s(\"el-button\",{staticStyle:{width:\"84px\",padding:\"0px\"},attrs:{slot:\"append\",disabled:e.issendSms},on:{click:function(t){e.checkYzm(\"ruleForm\",\"yzm\",t)}},slot:\"append\"},[e._v(\"发送短信\")])],1)],1)],1):e._e(),e.showSms?s(\"div\",{key:2,staticClass:\"register-user\"},[s(\"el-form-item\",{attrs:{error:e.errorName,prop:\"name\"}},[s(\"el-input\",{attrs:{placeholder:\"输入昵称\",\"suffix-icon\":\"el-icon-tickets\",id:\"register-user-input3\"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,\"name\",t)},expression:\"ruleForm.name\"}})],1),s(\"el-form-item\",{attrs:{prop:\"password\"}},[s(\"el-input\",{attrs:{placeholder:\"请输入密码\",\"suffix-icon\":\"el-icon-edit-outline\",id:\"register-user-input4\",type:\"password\"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,\"password\",t)},expression:\"ruleForm.password\"}})],1),s(\"el-form-item\",{attrs:{prop:\"sms\",error:e.errorSms}},[s(\"el-input\",{attrs:{placeholder:\"输入短信验证码\",\"suffix-icon\":\"el-icon-message\",id:\"register-user-input5\"},model:{value:e.ruleForm.sms,callback:function(t){e.$set(e.ruleForm,\"sms\",t)},expression:\"ruleForm.sms\"}},[s(\"el-button\",{attrs:{slot:\"append\"},on:{click:function(t){e.regNow(\"ruleForm\",\"name\",\"password\",\"sms\")}},slot:\"append\"},[e.isZc?s(\"span\",[e._v(\"注册\")]):s(\"i\",{staticClass:\"el-icon-loading\"})])],1)],1)],1):e._e()])],1),s(\"div\",{attrs:{id:\"register-ds\"}},[s(\"span\",{staticStyle:{float:\"left\"}},[e._v(\"第三方登录:\")]),s(\"img\",{staticClass:\"register-icon\",attrs:{src:r(\"3f62\")}}),s(\"img\",{staticClass:\"register-icon\",attrs:{src:r(\"794d\")}}),s(\"div\",{staticClass:\"register\",staticStyle:{\"margin-left\":\"200px\"},on:{click:function(t){e.register()}}},[e._v(\"已有账号？立即账号\")])])],1)])},i=[],o=(r(\"7f7f\"),r(\"be94\")),a=(r(\"cadf\"),r(\"551c\"),r(\"097d\"),r(\"2f62\")),n={data:function(){return{show:!1,ruleForm:{account:\"\",password:\"\",name:\"\",yzm:\"\",sms:\"\"},captchas:\"\",captcha_key:\"\",showcaptchas:!1,showSms:!1,smskey:\"\",isdis:!1,issendSms:!1,errorMsg:\"\",errorphone:\"\",errorSms:\"\",errorName:\"\",isreloadYzm:!0,isZc:!0,rules:{account:[{required:!0,message:\"请输入账号\",trigger:\"blur\"},{min:3,max:20,message:\"长度在 3 到 20 个字符\",trigger:\"blur\"},{pattern:/^1[34578]\\d{9}$/,message:\"手机号格式不正确\",trigger:\"blur\"}],yzm:[{required:!0,message:\"请输入验证码\",trigger:\"blur\"}],sms:[{required:!0,message:\"请输入短信验证码\",trigger:\"blur\"}],name:[{required:!0,message:\"请输入昵称\",trigger:\"blur\"},{min:2,max:10,message:\"长度在 2 到 10 个字符\",trigger:\"blur\"}],password:[{required:!0,message:\"请输入密码\",trigger:\"blur\"},{min:6,max:20,message:\"长度在 6 到 20 个字符\",trigger:\"blur\"}]}}},mounted:function(){setTimeout(function(){this.show=!0},200)},computed:Object(o[\"a\"])({},Object(a[\"b\"])([\"setUser\"])),methods:Object(o[\"a\"])({},Object(a[\"d\"])({setverbState:\"SET_VERBSTATE\",setToken:\"SET_TOKEN\"}),{register:function(){this.$emit(\"log\",!0)},getCap:function(e,t){var r=this;this.errorphone=\"\",this.$refs[e].validateField(t,function(e){if(\"\"===e){var t={phone:r.ruleForm.account};r.$server.getCaptchas(t).then(function(e){r.captchas=e.captcha_image_content,r.captcha_key=e.captcha_key,r.showcaptchas=!0,r.isdis=!0,r.isreloadYzm=!0}).catch(function(e){return 422===e.status?(r.errorphone=\"电话号已存在\",!1):429===e.status?(r.errorphone=\"操作次数错过，请稍后再试\",r.showcaptchas=!1,!1):void 0})}})},oninput:function(){this.isdis=!1,this.showcaptchas=!1,this.ruleForm.yzm=\"\"},reloadYzm:function(){var e=this;this.isreloadYzm=!1,setTimeout(function(){e.getCap(\"ruleForm\",\"account\")},500)},checkYzm:function(e,t,r){var s=this;this.errorMsg=\"\",this.$refs[e].validateField(t,function(e){if(\"\"===e){var t={captcha_key:s.captcha_key,captcha_code:s.ruleForm.yzm};s.$server.checkYzm(t).then(function(e){var t=60,i=setInterval(function(){r.target.innerHTML=t,t--,0===t&&(clearInterval(i),s.issendSms=!1,r.target.innerHTML=\"发送短信\")},1e3);s.issendSms=!0,s.smskey=e.key,s.showSms=!0}).catch(function(e){return 401===e.status?(s.getCap(\"ruleForm\",\"yzm\"),s.errorMsg=\"验证码错误\",!1):429===e.status?(s.errorMsg=\"操作次数过多，请稍后再试\",s.isdis=!1,s.showcaptchas=!1,s.ruleForm.yzm=\"\",!1):422===e.status?(s.errorMsg=\"图片验证码已失效,点就图片重新获取\",!1):void 0})}})},regNow:function(e,t,r,s){var i=this,o=\"\",a=\"\";this.isZc=!1,this.$refs[e].validateField(t,function(e){o=e}),this.$refs[e].validateField(r,function(e){a=e}),\"\"===a&&\"\"===o&&this.$refs[e].validateField(s,function(e){if(\"\"===e){var t={verification_key:i.smskey,password:i.ruleForm.password,name:i.ruleForm.name,phone:i.ruleForm.account,verification_code:i.ruleForm.sms};i.$server.regNow(t).then(function(e){var t=e.meta.access_token;i.setverbState(!0),i.setToken(t),localStorage.setItem(\"access_token\",t),localStorage.setItem(\"verbState\",\"true\"),i.setUser,i.$message({message:\"注册成功，开始您的流域\",type:\"success\"}),i.isZc=!0,i.$router.push({name:\"index\"})}).catch(function(e){return console.log(e),422===e.status?(i.errorName=\"昵称已存在\",i.isZc=!0,!1):401===e.status?(i.errorSms=\"验证码错误\",i.isZc=!0,!1):423===e.status?(i.errorSms=\"验证码失效，请重新发送\",i.getCap(\"ruleForm\",\"account\"),i.isZc=!0,!1):void 0})}})}})},c=n,u=(r(\"e185\"),r(\"2877\")),l=Object(u[\"a\"])(c,s,i,!1,null,null,null);l.options.__file=\"register.vue\";t[\"default\"]=l.exports},e185:function(e,t,r){\"use strict\";var s=r(\"7198\"),i=r.n(s);i.a}}]);","extractedComments":[]}